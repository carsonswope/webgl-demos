!function(t){var n={};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(e,r,t){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(r,e){if(1&e&&(r=o(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var n in r)o.d(t,n,function(e){return r[e]}.bind(null,n));return t},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="",o(o.s=2)}([function(e,r,t){var n;n=function(){return n={},o.m=t={"./src/attributes.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.__esModule=!0,r.createAttribsFromArrays=B,r.createBuffersFromArrays=function(r,t){var n={};Object.keys(t).forEach(function(e){n[e]=O(r,t[e],e)}),t.indices?(n.numElements=t.indices.length,n.elementType=b.getGLTypeForTypedArray(P(t.indices),"indices")):n.numElements=function(e){var r,t;for(t=0;t<M.length&&!((r=M[t])in e);++t);t===M.length&&(r=Object.keys(e)[0]);var n=e[r],o=F(n).length,i=w(n,r),a=o/i;if(0<o%i)throw new Error("numComponents ".concat(i," not correct for length ").concat(o));return a}(t);return n},r.createBufferFromArray=O,r.createBufferFromTypedArray=E,r.createBufferInfoFromArrays=function(e,r,t){var n=B(e,r),o=Object.assign({},t||{});o.attribs=Object.assign({},t?t.attribs:{},n);var i=r.indices;{var a;i?(a=P(i,"indices"),o.indices=E(e,a,s),o.numElements=a.length,o.elementType=b.getGLTypeForTypedArray(a)):o.numElements||(o.numElements=function(e,r){var t,n;for(n=0;n<M.length&&!((t=M[n])in r)&&!((t=x.attribPrefix+t)in r);++n);n===M.length&&(t=Object.keys(r)[0]);var o=r[t];e.bindBuffer(h,o.buffer);var i=e.getBufferParameter(h,c);e.bindBuffer(h,null);var a=function(e){return e===l||e===m?1:e===p||e===d?2:e===y||e===v||e===g?4:0}(o.type),u=i/a,s=o.numComponents||o.size,f=u/s;if(f%1==0)return f;throw new Error("numComponents ".concat(s," not correct for length ").concat(length))}(e,o.attribs))}return o},r.setAttribInfoBufferFromArray=function(e,r,t,n){t=P(t),void 0!==n?(e.bindBuffer(h,r.buffer),e.bufferSubData(h,n,t)):f(e,h,r.buffer,t,r.drawType)},r.setAttributePrefix=function(e){x.attribPrefix=e},r.setAttributeDefaults_=function(e){i.copyExistingProperties(e,x)},r.getNumComponents_=w,r.getArray_=F;var b=n(t("./src/typedarrays.js")),i=n(t("./src/helper.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((t=o?Object.getOwnPropertyDescriptor(e,i):null)&&(t.get||t.set)?Object.defineProperty(n,i,t):n[i]=e[i])}return n.default=e,r&&r.set(e,n),n}var _=35044,h=34962,s=34963,c=34660,l=5120,m=5121,p=5122,d=5123,y=5124,v=5125,g=5126,x={attribPrefix:""};function f(e,r,t,n,o){e.bindBuffer(r,t),e.bufferData(r,n,o||_)}function E(e,r,t,n){if(i.isBuffer(e,r))return r;t=t||h;var o=e.createBuffer();return f(e,t,o,r,n),o}function A(e){return"indices"===e}function F(e){return e.length?e:e.data}var o=/coord|texture/i,T=/color|colour/i;function R(e,r){var t=o.test(e)?2:T.test(e)?4:3;if(0<r%t)throw new Error("Can not guess numComponents for attribute '".concat(e,"'. Tried ").concat(t," but ").concat(r," values is not evenly divisible by ").concat(t,". You should specify it."));return t}function w(e,r){return e.numComponents||e.size||R(r,F(e).length)}function P(e,r){if(b.isArrayBuffer(e))return e;if(b.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var t=e.type;return new(t=t||(A(r)?Uint16Array:Float32Array))(e.data)}function B(p,d){var y={};return Object.keys(d).forEach(function(e){if(!A(e)){var r,t,n,o,i,a,u,s,f=d[e],c=f.attrib||f.name||f.attribName||x.attribPrefix+e;if(f.value){if(!Array.isArray(f.value)&&!b.isArrayBuffer(f.value))throw new Error("array.value is not array or typedarray");y[c]={value:f.value}}else{f.buffer&&f.buffer instanceof WebGLBuffer?(u=f.buffer,a=f.numComponents||f.size,o=f.type,i=f.normalize):"number"==typeof f||"number"==typeof f.data?(n=(r=f.data||f)*(t=f.type||Float32Array).BYTES_PER_ELEMENT,o=b.getGLTypeForTypedArrayType(t),i=void 0!==f.normalize?f.normalize:(m=t)===Int8Array||m===Uint8Array,a=f.numComponents||f.size||R(e,r),u=p.createBuffer(),p.bindBuffer(h,u),p.bufferData(h,n,f.drawType||_)):(s=P(f,e),u=E(p,s,void 0,f.drawType),o=b.getGLTypeForTypedArray(s),i=void 0!==f.normalize?f.normalize:(l=s)instanceof Int8Array||l instanceof Uint8Array,a=w(f,e)),y[c]={buffer:u,numComponents:a,type:o,normalize:i,stride:f.stride||0,offset:f.offset||0,divisor:void 0===f.divisor?void 0:f.divisor,drawType:f.drawType}}}var l,m}),p.bindBuffer(h,null),y}var M=["position","positions","a_position"];function O(e,r,t){var n="indices"===t?s:h;return E(e,P(r,t),n)}},"./src/draw.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.__esModule=!0,r.drawBufferInfo=l,r.drawObjectList=function(i,e){var a=null,u=null;e.forEach(function(e){var r,t,n,o;!1!==e.active&&(r=e.programInfo,t=e.vertexArrayInfo||e.bufferInfo,n=!1,o=void 0===e.type?f:e.type,r!==a&&(a=r,i.useProgram(r.program),n=!0),!n&&t===u||(u&&u.vertexArrayObject&&!t.vertexArrayObject&&i.bindVertexArray(null),u=t,s.setBuffersAndAttributes(i,r,t)),s.setUniforms(r,e.uniforms),l(i,t,o,e.count,e.offset,e.instanceCount))}),u&&u.vertexArrayObject&&i.bindVertexArray(null)};var s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){var i;Object.prototype.hasOwnProperty.call(e,o)&&((i=n?Object.getOwnPropertyDescriptor(e,o):null)&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o])}t.default=e,r&&r.set(e,t);return t}(t("./src/programs.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}var f=4,c=5123;function l(e,r,t,n,o,i){t=void 0===t?f:t;var a=r.indices,u=r.elementType,s=void 0===n?r.numElements:n;o=void 0===o?0:o,u||a?void 0!==i?e.drawElementsInstanced(t,s,void 0===u?c:r.elementType,o,i):e.drawElements(t,s,void 0===u?c:r.elementType,o):void 0!==i?e.drawArraysInstanced(t,o,s,i):e.drawArrays(t,o,s)}},"./src/framebuffers.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.__esModule=!0,r.bindFramebufferInfo=function(e,r,t){t=t||o,r?(e.bindFramebuffer(t,r.framebuffer),e.viewport(0,0,r.width,r.height)):(e.bindFramebuffer(t,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},r.createFramebufferInfo=function(i,e,a,u){var s=o,r=i.createFramebuffer();i.bindFramebuffer(s,r),a=a||i.drawingBufferWidth,u=u||i.drawingBufferHeight;var f=0,c={framebuffer:r,attachments:[],width:a,height:u};return(e=e||h).forEach(function(e){var r,t=e.attachment,n=e.format,o=(o=v[n])||y+f++;if(t||(g[n]?(t=i.createRenderbuffer(),i.bindRenderbuffer(p,t),i.renderbufferStorage(p,n,a,u)):((r=Object.assign({},e)).width=a,r.height=u,void 0===r.auto&&(r.auto=!1,r.min=r.min||r.minMag||_,r.mag=r.mag||r.minMag||_,r.wrapS=r.wrapS||r.wrap||b,r.wrapT=r.wrapT||r.wrap||b),t=l.createTexture(i,r))),m.isRenderbuffer(i,t))i.framebufferRenderbuffer(s,o,p,t);else{if(!m.isTexture(i,t))throw new Error("unknown attachment type");void 0!==e.layer?i.framebufferTextureLayer(s,o,t,e.level||0,e.layer):i.framebufferTexture2D(s,o,e.target||d,t,e.level||0)}c.attachments.push(t)}),c},r.resizeFramebufferInfo=function(o,i,e,a,u){a=a||o.drawingBufferWidth,u=u||o.drawingBufferHeight,i.width=a,i.height=u,(e=e||h).forEach(function(e,r){var t=i.attachments[r],n=e.format;if(m.isRenderbuffer(o,t))o.bindRenderbuffer(p,t),o.renderbufferStorage(p,n,a,u);else{if(!m.isTexture(o,t))throw new Error("unknown attachment type");l.resizeTexture(o,t,e,a,u)}})};var l=n(t("./src/textures.js")),m=n(t("./src/helper.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((t=o?Object.getOwnPropertyDescriptor(e,i):null)&&(t.get||t.set)?Object.defineProperty(n,i,t):n[i]=e[i])}return n.default=e,r&&r.set(e,n),n}var o=36160,p=36161,d=3553,y=36064,b=33071,_=9729,h=[{format:6408,type:5121,min:_,wrap:b},{format:34041}],v={};v[34041]=33306,v[6401]=36128,v[36168]=36128,v[6402]=36096,v[33189]=36096;var g={};g[32854]=!0,g[32855]=!0,g[36194]=!0,g[34041]=!0,g[33189]=!0,g[6401]=!0,g[36168]=!0},"./src/helper.js":function(e,r,t){"use strict";r.__esModule=!0,r.copyExistingProperties=function(r,t){Object.keys(t).forEach(function(e){t.hasOwnProperty(e)&&r.hasOwnProperty(e)&&(t[e]=r[e])})},r.copyNamedProperties=function(e,t,n){e.forEach(function(e){var r=t[e];void 0!==r&&(n[e]=r)})},r.error=function(){var e;(e=console).error.apply(e,arguments)},r.warn=function(){var e;(e=console).warn.apply(e,arguments)},r.isBuffer=function(e,r){return"undefined"!=typeof WebGLBuffer&&r instanceof WebGLBuffer},r.isRenderbuffer=function(e,r){return"undefined"!=typeof WebGLRenderbuffer&&r instanceof WebGLRenderbuffer},r.isShader=function(e,r){return"undefined"!=typeof WebGLShader&&r instanceof WebGLShader},r.isTexture=function(e,r){return"undefined"!=typeof WebGLTexture&&r instanceof WebGLTexture},r.isSampler=function(e,r){return"undefined"!=typeof WebGLSampler&&r instanceof WebGLSampler}},"./src/m4.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.__esModule=!0,r.axisRotate=function(e,r,t,n){n=n||new H(16);var o=r[0],i=r[1],a=r[2],u=Math.sqrt(o*o+i*i+a*a),s=(o/=u)*o,f=(i/=u)*i,c=(a/=u)*a,l=Math.cos(t),m=Math.sin(t),p=1-l,d=s+(1-s)*l,y=o*i*p+a*m,b=o*a*p-i*m,_=o*i*p-a*m,h=f+(1-f)*l,v=i*a*p+o*m,g=o*a*p+i*m,x=i*a*p-o*m,E=c+(1-c)*l,A=e[0],F=e[1],T=e[2],R=e[3],w=e[4],P=e[5],B=e[6],M=e[7],O=e[8],U=e[9],S=e[10],I=e[11];n[0]=d*A+y*w+b*O,n[1]=d*F+y*P+b*U,n[2]=d*T+y*B+b*S,n[3]=d*R+y*M+b*I,n[4]=_*A+h*w+v*O,n[5]=_*F+h*P+v*U,n[6]=_*T+h*B+v*S,n[7]=_*R+h*M+v*I,n[8]=g*A+x*w+E*O,n[9]=g*F+x*P+E*U,n[10]=g*T+x*B+E*S,n[11]=g*R+x*M+E*I,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);return n},r.axisRotation=function(e,r,t){t=t||new H(16);var n=e[0],o=e[1],i=e[2],a=Math.sqrt(n*n+o*o+i*i),u=(n/=a)*n,s=(o/=a)*o,f=(i/=a)*i,c=Math.cos(r),l=Math.sin(r),m=1-c;return t[0]=u+(1-u)*c,t[1]=n*o*m+i*l,t[2]=n*i*m-o*l,t[3]=0,t[4]=n*o*m-i*l,t[5]=s+(1-s)*c,t[6]=o*i*m+n*l,t[7]=0,t[8]=n*i*m+o*l,t[9]=o*i*m-n*l,t[10]=f+(1-f)*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.copy=c,r.frustum=function(e,r,t,n,o,i,a){a=a||new H(16);var u=r-e,s=n-t,f=o-i;return a[0]=2*o/u,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*o/s,a[6]=0,a[7]=0,a[8]=(e+r)/u,a[9]=(n+t)/s,a[10]=i/f,a[11]=-1,a[12]=0,a[13]=0,a[14]=o*i/f,a[15]=0,a},r.getAxis=function(e,r,t){t=t||u.create();var n=4*r;return t[0]=e[0+n],t[1]=e[1+n],t[2]=e[2+n],t},r.getTranslation=function(e,r){return(r=r||u.create())[0]=e[12],r[1]=e[13],r[2]=e[14],r},r.identity=n,r.inverse=l,r.lookAt=function(e,r,t,n){return n=n||new H(16),o=o||u.create(),i=i||u.create(),f=f||u.create(),u.normalize(u.subtract(e,r,f),f),u.normalize(u.cross(t,f,o),o),u.normalize(u.cross(f,o,i),i),n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=0,n[4]=i[0],n[5]=i[1],n[6]=i[2],n[7]=0,n[8]=f[0],n[9]=f[1],n[10]=f[2],n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},r.multiply=function(e,r,t){t=t||new H(16);var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],m=e[9],p=e[10],d=e[11],y=e[12],b=e[13],_=e[14],h=e[15],v=r[0],g=r[1],x=r[2],E=r[3],A=r[4],F=r[5],T=r[6],R=r[7],w=r[8],P=r[9],B=r[10],M=r[11],O=r[12],U=r[13],S=r[14],I=r[15];return t[0]=n*v+u*g+l*x+y*E,t[1]=o*v+s*g+m*x+b*E,t[2]=i*v+f*g+p*x+_*E,t[3]=a*v+c*g+d*x+h*E,t[4]=n*A+u*F+l*T+y*R,t[5]=o*A+s*F+m*T+b*R,t[6]=i*A+f*F+p*T+_*R,t[7]=a*A+c*F+d*T+h*R,t[8]=n*w+u*P+l*B+y*M,t[9]=o*w+s*P+m*B+b*M,t[10]=i*w+f*P+p*B+_*M,t[11]=a*w+c*P+d*B+h*M,t[12]=n*O+u*U+l*S+y*I,t[13]=o*O+s*U+m*S+b*I,t[14]=i*O+f*U+p*S+_*I,t[15]=a*O+c*U+d*S+h*I,t},r.negate=function(e,r){return(r=r||new H(16))[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=-e[7],r[8]=-e[8],r[9]=-e[9],r[10]=-e[10],r[11]=-e[11],r[12]=-e[12],r[13]=-e[13],r[14]=-e[14],r[15]=-e[15],r},r.ortho=function(e,r,t,n,o,i,a){return(a=a||new H(16))[0]=2/(r-e),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(n-t),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(o-i),a[11]=0,a[12]=(r+e)/(e-r),a[13]=(n+t)/(t-n),a[14]=(i+o)/(o-i),a[15]=1,a},r.perspective=function(e,r,t,n,o){o=o||new H(16);var i=Math.tan(.5*Math.PI-.5*e),a=1/(t-n);return o[0]=i/r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(t+n)*a,o[11]=-1,o[12]=0,o[13]=0,o[14]=t*n*a*2,o[15]=0,o},r.rotateX=function(e,r,t){t=t||new H(16);var n=e[4],o=e[5],i=e[6],a=e[7],u=e[8],s=e[9],f=e[10],c=e[11],l=Math.cos(r),m=Math.sin(r);t[4]=l*n+m*u,t[5]=l*o+m*s,t[6]=l*i+m*f,t[7]=l*a+m*c,t[8]=l*u-m*n,t[9]=l*s-m*o,t[10]=l*f-m*i,t[11]=l*c-m*a,e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.rotateY=function(e,r,t){t=t||new H(16);var n=e[0],o=e[1],i=e[2],a=e[3],u=e[8],s=e[9],f=e[10],c=e[11],l=Math.cos(r),m=Math.sin(r);t[0]=l*n-m*u,t[1]=l*o-m*s,t[2]=l*i-m*f,t[3]=l*a-m*c,t[8]=l*u+m*n,t[9]=l*s+m*o,t[10]=l*f+m*i,t[11]=l*c+m*a,e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.rotateZ=function(e,r,t){t=t||new H(16);var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=Math.cos(r),m=Math.sin(r);t[0]=l*n+m*u,t[1]=l*o+m*s,t[2]=l*i+m*f,t[3]=l*a+m*c,t[4]=l*u-m*n,t[5]=l*s-m*o,t[6]=l*f-m*i,t[7]=l*c-m*a,e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.rotationX=function(e,r){r=r||new H(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.rotationY=function(e,r){r=r||new H(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=t,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.rotationZ=function(e,r){r=r||new H(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=t,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.scale=function(e,r,t){t=t||new H(16);var n=r[0],o=r[1],i=r[2];t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=n*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=o*e[6],t[7]=o*e[7],t[8]=i*e[8],t[9]=i*e[9],t[10]=i*e[10],t[11]=i*e[11],e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.scaling=function(e,r){return(r=r||new H(16))[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.setAxis=function(e,r,t,n){n!==e&&(n=c(e,n));var o=4*t;return n[0+o]=r[0],n[1+o]=r[1],n[2+o]=r[2],n},r.setDefaultType=function(e){var r=H;return H=e,r},r.setTranslation=function(e,r,t){t=t||n(),e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]);return t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r.transformDirection=function(e,r,t){t=t||u.create();var n=r[0],o=r[1],i=r[2];return t[0]=n*e[0]+o*e[4]+i*e[8],t[1]=n*e[1]+o*e[5]+i*e[9],t[2]=n*e[2]+o*e[6]+i*e[10],t},r.transformNormal=function(e,r,t){t=t||u.create();var n=l(e),o=r[0],i=r[1],a=r[2];return t[0]=o*n[0]+i*n[1]+a*n[2],t[1]=o*n[4]+i*n[5]+a*n[6],t[2]=o*n[8]+i*n[9]+a*n[10],t},r.transformPoint=function(e,r,t){t=t||u.create();var n=r[0],o=r[1],i=r[2],a=n*e[3]+o*e[7]+i*e[11]+e[15];return t[0]=(n*e[0]+o*e[4]+i*e[8]+e[12])/a,t[1]=(n*e[1]+o*e[5]+i*e[9]+e[13])/a,t[2]=(n*e[2]+o*e[6]+i*e[10]+e[14])/a,t},r.translate=function(e,r,t){t=t||new H(16);var n=r[0],o=r[1],i=r[2],a=e[0],u=e[1],s=e[2],f=e[3],c=e[4],l=e[5],m=e[6],p=e[7],d=e[8],y=e[9],b=e[10],_=e[11],h=e[12],v=e[13],g=e[14],x=e[15];e!==t&&(t[0]=a,t[1]=u,t[2]=s,t[3]=f,t[4]=c,t[5]=l,t[6]=m,t[7]=p,t[8]=d,t[9]=y,t[10]=b,t[11]=_);return t[12]=a*n+c*o+d*i+h,t[13]=u*n+l*o+y*i+v,t[14]=s*n+m*o+b*i+g,t[15]=f*n+p*o+_*i+x,t},r.translation=function(e,r){return(r=r||new H(16))[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},r.transpose=function(e,r){if((r=r||new H(16))===e){var t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,r}var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],m=e[9],p=e[10],d=e[11],y=e[12],b=e[13],_=e[14],h=e[15];return r[0]=n,r[1]=u,r[2]=l,r[3]=y,r[4]=o,r[5]=s,r[6]=m,r[7]=b,r[8]=i,r[9]=f,r[10]=p,r[11]=_,r[12]=a,r[13]=c,r[14]=d,r[15]=h,r};var u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){var i;Object.prototype.hasOwnProperty.call(e,o)&&((i=n?Object.getOwnPropertyDescriptor(e,o):null)&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o])}t.default=e,r&&r.set(e,t);return t}(t("./src/v3.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}var o,i,f,H=Float32Array;function c(e,r){return(r=r||new H(16))[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function n(e){return(e=e||new H(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,r){r=r||new H(16);var t=e[0],n=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8],l=e[9],m=e[10],p=e[11],d=e[12],y=e[13],b=e[14],_=e[15],h=m*_,v=b*p,g=s*_,x=b*f,E=s*p,A=m*f,F=o*_,T=b*i,R=o*p,w=m*i,P=o*f,B=s*i,M=c*y,O=d*l,U=a*y,S=d*u,I=a*l,D=c*u,j=t*y,C=d*n,k=t*l,L=c*n,G=t*u,N=a*n,z=h*u+x*l+E*y-(v*u+g*l+A*y),W=v*n+F*l+w*y-(h*n+T*l+R*y),X=g*n+T*u+P*y-(x*n+F*u+B*y),V=A*n+R*u+B*l-(E*n+w*u+P*l),Y=1/(t*z+a*W+c*X+d*V);return r[0]=Y*z,r[1]=Y*W,r[2]=Y*X,r[3]=Y*V,r[4]=Y*(v*a+g*c+A*d-(h*a+x*c+E*d)),r[5]=Y*(h*t+T*c+R*d-(v*t+F*c+w*d)),r[6]=Y*(x*t+F*a+B*d-(g*t+T*a+P*d)),r[7]=Y*(E*t+w*a+P*c-(A*t+R*a+B*c)),r[8]=Y*(M*f+S*p+I*_-(O*f+U*p+D*_)),r[9]=Y*(O*i+j*p+L*_-(M*i+C*p+k*_)),r[10]=Y*(U*i+C*f+G*_-(S*i+j*f+N*_)),r[11]=Y*(D*i+k*f+N*p-(I*i+L*f+G*p)),r[12]=Y*(U*m+D*b+O*s-(I*b+M*s+S*m)),r[13]=Y*(k*b+M*o+C*m-(j*m+L*b+O*o)),r[14]=Y*(j*s+N*b+S*o-(G*b+U*o+C*s)),r[15]=Y*(G*m+I*o+L*s-(k*s+N*m+D*o)),r}},"./src/primitives.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.__esModule=!0,r.create3DFVertices=w,r.createAugmentedTypedArray=I,r.createCubeVertices=F,r.createPlaneVertices=x,r.createSphereVertices=E,r.createTruncatedConeVertices=T,r.createXYQuadVertices=g,r.createCrescentVertices=B,r.createCylinderVertices=M,r.createTorusVertices=O,r.createDiscVertices=U,r.deindexVertices=function(u){var s=u.indices,f={},c=s.length;return Object.keys(u).filter(m).forEach(function(e){for(var r=u[e],t=r.numComponents,n=I(t,c,r.constructor),o=0;o<c;++o)for(var i=s[o]*t,a=0;a<t;++a)n.push(r[i+a]);f[e]=n}),f},r.flattenNormals=function(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var r=e.normal,t=r.length,n=0;n<t;n+=9){var o=r[n+0],i=r[n+1],a=r[n+2],u=r[n+3],s=r[n+4],f=r[n+5],c=r[n+6],l=r[n+7],m=r[n+8],p=o+u+c,d=i+s+l,y=a+f+m,b=Math.sqrt(p*p+d*d+y*y);p/=b,d/=b,y/=b,r[n+0]=p,r[n+1]=d,r[n+2]=y,r[n+3]=p,r[n+4]=d,r[n+5]=y,r[n+6]=p,r[n+7]=d,r[n+8]=y}return e},r.makeRandomVertexColors=function(e,r){r=r||{};var t=e.position.numElements,n=I(4,t,Uint8Array),o=r.rand||function(e,r){return r<3?256*Math.random()|0:255};if(e.color=n,e.indices)for(var i=0;i<t;++i)n.push(o(i,0),o(i,1),o(i,2),o(i,3));else for(var a=r.vertsPerColor||3,u=t/a,s=0;s<u;++s)for(var f=[o(s,0),o(s,1),o(s,2),o(s,3)],c=0;c<a;++c)n.push(f);return e},r.reorientDirections=y,r.reorientNormals=b,r.reorientPositions=h,r.reorientVertices=v,r.concatVertices=function(s){for(var i,a={},e=0;e<s.length;++e)!function(e){var o=s[e];Object.keys(o).forEach(function(e){a[e]||(a[e]=[]),i||"indices"===e||(i=e);var r=o[e],t=c(r,e),n=f(r).length/t;a[e].push(n)})}(e);var n=a[i],o={};return Object.keys(a).forEach(function(e){var r=function(e){for(var r,t=0,n=0;n<s.length;++n){var o=s[n][e],i=f(o);t+=i.length,r&&!o.data||(r=o)}return{length:t,spec:r}}(e),t=k(r.spec,r.length);!function(e,r,t){for(var n=0,o=0,i=0;i<s.length;++i){var a=s[i][e],u=f(a);"indices"===e?(C(u,t,o,n),n+=r[i]):C(u,t,o),o+=u.length}}(e,n,f(t)),o[e]=t}),o},r.duplicateVertices=function(o){var i={};return Object.keys(o).forEach(function(e){var r=o[e],t=f(r),n=k(r,t.length);C(t,f(n),0),i[e]=n}),i},r.createDiscBuffers=r.createDiscBufferInfo=r.createTorusBuffers=r.createTorusBufferInfo=r.createCylinderBuffers=r.createCylinderBufferInfo=r.createCrescentBuffers=r.createCrescentBufferInfo=r.createCresentVertices=r.createCresentBuffers=r.createCresentBufferInfo=r.createXYQuadBuffers=r.createXYQuadBufferInfo=r.createTruncatedConeBuffers=r.createTruncatedConeBufferInfo=r.createSphereBuffers=r.createSphereBufferInfo=r.createPlaneBuffers=r.createPlaneBufferInfo=r.createCubeBuffers=r.createCubeBufferInfo=r.create3DFBuffers=r.create3DFBufferInfo=void 0;var n=o(t("./src/attributes.js")),i=o(t("./src/helper.js")),u=o(t("./src/typedarrays.js")),_=o(t("./src/m4.js")),P=o(t("./src/v3.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((t=o?Object.getOwnPropertyDescriptor(e,i):null)&&(t.get||t.set)?Object.defineProperty(n,i,t):n[i]=e[i])}return n.default=e,r&&r.set(e,n),n}var f=n.getArray_,c=n.getNumComponents_;function l(n,e){var o=0;return n.push=function(){for(var e=0;e<arguments.length;++e){var r=arguments[e];if(r instanceof Array||u.isArrayBuffer(r))for(var t=0;t<r.length;++t)n[o++]=r[t];else n[o++]=r}},n.reset=function(e){o=e||0},n.numComponents=e,Object.defineProperty(n,"numElements",{get:function(){return this.length/this.numComponents|0}}),n}function I(e,r,t){return l(new(t||Float32Array)(e*r),e)}function m(e){return"indices"!==e}function p(e,r,t){for(var n=e.length,o=new Float32Array(3),i=0;i<n;i+=3)t(r,[e[i],e[i+1],e[i+2]],o),e[i]=o[0],e[i+1]=o[1],e[i+2]=o[2]}function d(e,r,t){t=t||P.create();var n=r[0],o=r[1],i=r[2];return t[0]=n*e[0]+o*e[1]+i*e[2],t[1]=n*e[4]+o*e[5]+i*e[6],t[2]=n*e[8]+o*e[9]+i*e[10],t}function y(e,r){return p(e,r,_.transformDirection),e}function b(e,r){return p(e,_.inverse(r),d),e}function h(e,r){return p(e,r,_.transformPoint),e}function v(t,n){return Object.keys(t).forEach(function(e){var r=t[e];0<=e.indexOf("pos")?h(r,n):0<=e.indexOf("tan")||0<=e.indexOf("binorm")?y(r,n):0<=e.indexOf("norm")&&b(r,n)}),t}function g(e,r,t){return e=e||2,{position:{numComponents:2,data:[(r=r||0)+-1*(e*=.5),(t=t||0)+-1*e,r+ +e,t+-1*e,r+-1*e,t+ +e,r+ +e,t+ +e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function x(e,r,t,n,o){e=e||1,r=r||1,t=t||1,n=n||1,o=o||_.identity();for(var i=(t+1)*(n+1),a=I(3,i),u=I(3,i),s=I(2,i),f=0;f<=n;f++)for(var c=0;c<=t;c++){var l=c/t,m=f/n;a.push(e*l-.5*e,0,r*m-.5*r),u.push(0,1,0),s.push(l,m)}for(var p=t+1,d=I(3,t*n*2,Uint16Array),y=0;y<n;y++)for(var b=0;b<t;b++)d.push((y+0)*p+b,(y+1)*p+b,(y+0)*p+b+1),d.push((y+1)*p+b,(y+1)*p+b+1,(y+0)*p+b+1);return v({position:a,normal:u,texcoord:s,indices:d},o)}function E(e,r,t,n,o,i,a){if(r<=0||t<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,i=i||0;for(var u=(o=o||Math.PI)-n,s=(a=a||2*Math.PI)-i,f=(r+1)*(t+1),c=I(3,f),l=I(3,f),m=I(2,f),p=0;p<=t;p++)for(var d=0;d<=r;d++){var y=d/r,b=p/t,_=s*y+i,h=u*b+n,v=Math.sin(_),g=Math.cos(_),x=Math.sin(h),E=g*x,A=Math.cos(h),F=v*x;c.push(e*E,e*A,e*F),l.push(E,A,F),m.push(1-y,b)}for(var T=r+1,R=I(3,r*t*2,Uint16Array),w=0;w<r;w++)for(var P=0;P<t;P++)R.push((P+0)*T+w,(P+0)*T+w+1,(P+1)*T+w),R.push((P+1)*T+w,(P+0)*T+w+1,(P+1)*T+w+1);return{position:c,normal:l,texcoord:m,indices:R}}var A=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function F(e){for(var r=(e=e||1)/2,t=[[-r,-r,-r],[+r,-r,-r],[-r,+r,-r],[+r,+r,-r],[-r,-r,+r],[+r,-r,+r],[-r,+r,+r],[+r,+r,+r]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=I(3,24),a=I(3,24),u=I(2,24),s=I(3,12,Uint16Array),f=0;f<6;++f){for(var c=A[f],l=0;l<4;++l){var m=t[c[l]],p=n[f],d=o[l];i.push(m),a.push(p),u.push(d)}var y=4*f;s.push(0+y,1+y,2+y),s.push(0+y,2+y,3+y)}return{position:i,normal:a,texcoord:u,indices:s}}function T(e,r,t,n,o,i,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var u=void 0===i||i,s=void 0===a||a,f=(u?2:0)+(s?2:0),c=(n+1)*(o+1+f),l=I(3,c),m=I(3,c),p=I(2,c),d=I(3,n*(o+f/2)*2,Uint16Array),y=n+1,b=Math.atan2(e-r,t),_=Math.cos(b),h=Math.sin(b),v=o+(s?2:0),g=u?-2:0;g<=v;++g){var x=g/o,E=t*x,A=void 0,A=g<0?(E=0,x=1,e):o<g?(E=t,x=1,r):e+g/o*(r-e);-2!==g&&g!==o+2||(x=A=0),E-=t/2;for(var F=0;F<y;++F){var T=Math.sin(F*Math.PI*2/n),R=Math.cos(F*Math.PI*2/n);l.push(T*A,E,R*A),g<0?m.push(0,-1,0):o<g?m.push(0,1,0):0===A?m.push(0,0,0):m.push(T*_,h,R*_),p.push(F/n,1-x)}}for(var w=0;w<o+f;++w)if(!(1===w&&u||w===o+f-2&&s))for(var P=0;P<n;++P)d.push(y*(w+0)+0+P,y*(w+0)+1+P,y*(w+1)+1+P),d.push(y*(w+0)+0+P,y*(w+1)+1+P,y*(w+1)+0+P);return{position:l,normal:m,texcoord:p,indices:d}}function R(e,r){r=r||[];for(var t=[],n=0;n<e.length;n+=4){var o=e[n],i=e.slice(n+1,n+4);i.push.apply(i,r);for(var a=0;a<o;++a)t.push.apply(t,i)}return t}function w(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],r=R([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),t=R([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,o={position:I(3,n),texcoord:I(2,n),normal:I(3,n),color:I(4,n,Uint8Array),indices:I(3,n/3,Uint16Array)};o.position.push(e),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(r),o.color.push(t);for(var i=0;i<n;++i)o.indices.push(i);return o}function B(v,e,r,g,x,E,t){if(x<=0)throw new Error("subdivisionDown must be > 0");var A=2,F=(t=t||1)-(E=E||0),n=2*(x+1)*(2+A),T=I(3,n),R=I(3,n),w=I(2,n);function o(e,r,t,n,o,i){for(var a,u=0;u<=x;u++){var s=r/(A-1),f=u/x,c=2*(s-.5),l=(E+f*F)*Math.PI,m=Math.sin(l),p=Math.cos(l),d=(a=v)+(e-a)*m,y=c*g,b=p*v,_=m*d;T.push(y,b,_);var h=P.add(P.multiply([0,m,p],t),n);R.push(h),w.push(s*o+i,f)}}for(var i=0;i<A;i++){var a=2*(i/(A-1)-.5);o(e,i,[1,1,1],[0,0,0],1,0),o(e,i,[0,0,0],[a,0,0],0,0),o(r,i,[1,1,1],[0,0,0],1,0),o(r,i,[0,0,0],[a,0,0],0,1)}var u=I(3,2*x*(2+A),Uint16Array);function s(e,r){for(var t=0;t<x;++t)u.push(e+t+0,e+t+1,r+t+0),u.push(e+t+1,r+t+1,r+t+0)}var f=x+1;return s(0*f,4*f),s(5*f,7*f),s(6*f,2*f),s(3*f,+f),{position:T,normal:R,texcoord:w,indices:u}}function M(e,r,t,n,o,i){return T(e,e,r,t,n,o,i)}function O(e,r,t,n,o,i){if(t<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;for(var a=(i=i||2*Math.PI)-o,u=t+1,s=n+1,f=u*s,c=I(3,f),l=I(3,f),m=I(2,f),p=I(3,t*n*2,Uint16Array),d=0;d<s;++d)for(var y=d/n,b=y*Math.PI*2,_=Math.sin(b),h=e+_*r,v=Math.cos(b),g=v*r,x=0;x<u;++x){var E=x/t,A=o+E*a,F=Math.sin(A),T=Math.cos(A),R=F*h,w=T*h,P=F*_,B=T*_;c.push(R,g,w),l.push(P,v,B),m.push(E,1-y)}for(var M=0;M<n;++M)for(var O=0;O<t;++O){var U=1+O,S=1+M;p.push(u*M+O,u*S+O,u*M+U),p.push(u*S+O,u*S+U,u*M+U)}return{position:c,normal:l,texcoord:m,indices:p}}function U(e,r,t,n,o){if(r<3)throw new Error("divisions must be at least 3");o=o||1,n=n||0;for(var i=(r+1)*((t=t||1)+1),a=I(3,i),u=I(3,i),s=I(2,i),f=I(3,t*r*2,Uint16Array),c=0,l=e-n,m=r+1,p=0;p<=t;++p){for(var d=n+l*Math.pow(p/t,o),y=0;y<=r;++y){var b,_,h,v,g=2*Math.PI*y/r,x=d*Math.cos(g),E=d*Math.sin(g);a.push(x,0,E),u.push(0,1,0),s.push(1-y/r,p/t),0<p&&y!==r&&(h=(_=c+y)-m,v=(b=c+(y+1))-m,f.push(b,_,h),f.push(b,h,v))}c+=r+1}return{position:a,normal:u,texcoord:s,indices:f}}function S(t){return function(e){var r=t.apply(this,Array.prototype.slice.call(arguments,1));return n.createBuffersFromArrays(e,r)}}function D(t){return function(e){var r=t.apply(null,Array.prototype.slice.call(arguments,1));return n.createBufferInfoFromArrays(e,r)}}var j=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function C(e,r,t,n){n=n||0;for(var o=e.length,i=0;i<o;++i)r[t+i]=e[i]+n}function k(e,r){var t=f(e),n=new t.constructor(r),o=n;return t.numComponents&&t.numElements&&l(n,t.numComponents),e.data&&(o={data:n},i.copyNamedProperties(j,e,o)),o}var L=D(w);r.create3DFBufferInfo=L;var G=S(w);r.create3DFBuffers=G;var N=D(F);r.createCubeBufferInfo=N;var z=S(F);r.createCubeBuffers=z;var W=D(x);r.createPlaneBufferInfo=W;var X=S(x);r.createPlaneBuffers=X;var V=D(E);r.createSphereBufferInfo=V;var Y=S(E);r.createSphereBuffers=Y;var H=D(T);r.createTruncatedConeBufferInfo=H;var q=S(T);r.createTruncatedConeBuffers=q;var K=D(g);r.createXYQuadBufferInfo=K;var Q=S(g);r.createXYQuadBuffers=Q;var Z=D(B);r.createCrescentBufferInfo=Z;var $=S(B);r.createCrescentBuffers=$;var J=D(M);r.createCylinderBufferInfo=J;var ee=S(M);r.createCylinderBuffers=ee;var re=D(O);r.createTorusBufferInfo=re;var te=S(O);r.createTorusBuffers=te;var ne=D(U);r.createDiscBufferInfo=ne;var oe=S(U);r.createDiscBuffers=oe,r.createCresentBufferInfo=Z,r.createCresentBuffers=$,r.createCresentVertices=B},"./src/programs.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.__esModule=!0,r.createAttributeSetters=ce,r.createProgram=J,r.createProgramFromScripts=function(e,r,t,n,o){for(var i=K(t,n,o),a=[],u=0;u<r.length;++u){var s=function(e,r,t,n){var o,i=_(r);if(!i)throw new Error("unknown script element: ".concat(r));o=i.text;var a=t||Z(0,i.type);if(a)return q(e,o,a,n);throw new Error("unknown shader type")}(e,r[u],e[Q[u]],i.errorCallback);if(!s)return null;a.push(s)}return J(e,a,i)},r.createProgramFromSources=ee,r.createProgramInfo=function(e,r,t,n,o){var i=K(t,n,o),a=!0;if(r=r.map(function(e){var r;return e.indexOf("\n")<0&&((r=_(e))?e=r.text:(i.errorCallback("no element with id: "+e),a=!1)),e}),!a)return null;var u=ee(e,r,i);return u?me(e,u):null},r.createProgramInfoFromProgram=me,r.createUniformSetters=te,r.createUniformBlockSpecFromProgram=ie,r.createUniformBlockInfoFromProgram=ue,r.createUniformBlockInfo=function(e,r,t){return ue(e,r.program,r.uniformBlockSpec,t)},r.createTransformFeedback=function(e,r,t){var n=e.createTransformFeedback();return e.bindTransformFeedback(y,n),e.useProgram(r.program),oe(e,r,t),e.bindTransformFeedback(y,null),n},r.createTransformFeedbackInfo=ne,r.bindTransformFeedbackInfo=oe,r.setAttributes=le,r.setBuffersAndAttributes=function(e,r,t){t.vertexArrayObject?e.bindVertexArray(t.vertexArrayObject):(le(r.attribSetters||r,t.attribs),t.indices&&e.bindBuffer(i,t.indices))},r.setUniforms=fe,r.setUniformBlock=function(e,r,t){se(e,r,t)&&e.bufferData(d,t.array,o)},r.setBlockUniforms=function(e,r){var t=e.uniforms;for(var n in r){var o,i=t[n];i&&((o=r[n]).length?i.set(o):i[0]=o)}},r.bindUniformBlock=se,r.setUniformsAndBindTextures=void 0;var s=n(t("./src/utils.js")),b=n(t("./src/helper.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((t=o?Object.getOwnPropertyDescriptor(e,i):null)&&(t.get||t.set)?Object.defineProperty(n,i,t):n[i]=e[i])}return n.default=e,r&&r.set(e,n),n}var f=b.error,m=b.warn;function _(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}var c=33984,o=35048,p=34962,i=34963,d=35345,l=35982,y=36386,h=35713,v=35714,g=35632,x=35633,E=35981,A=35718,F=35721,T=35971,R=35382,w=35396,P=35398,B=35392,M=35395,O=34067,U=35866,S={};function I(e,r){return S[r].bindPoint}function D(r,t){return function(e){r.uniform1i(t,e)}}function j(r,t){return function(e){r.uniform1iv(t,e)}}function C(r,t){return function(e){r.uniform2iv(t,e)}}function k(r,t){return function(e){r.uniform3iv(t,e)}}function L(r,t){return function(e){r.uniform4iv(t,e)}}function G(n,e,o,i){var a=I(0,e);return s.isWebGL2(n)?function(e){var r,t=b.isTexture(n,e)?(r=e,null):(r=e.texture,e.sampler);n.uniform1i(i,o),n.activeTexture(c+o),n.bindTexture(a,r),n.bindSampler(o,t)}:function(e){n.uniform1i(i,o),n.activeTexture(c+o),n.bindTexture(a,e)}}function N(o,e,i,r,t){for(var a=I(0,e),u=new Int32Array(t),n=0;n<t;++n)u[n]=i+n;return s.isWebGL2(o)?function(e){o.uniform1iv(r,u),e.forEach(function(e,r){var t,n;o.activeTexture(c+u[r]),n=b.isTexture(o,e)?(t=e,null):(t=e.texture,e.sampler),o.bindSampler(i,n),o.bindTexture(a,t)})}:function(e){o.uniform1iv(r,u),e.forEach(function(e,r){o.activeTexture(c+u[r]),o.bindTexture(a,e)})}}function z(r,t){return function(e){if(e.value)switch(r.disableVertexAttribArray(t),e.value.length){case 4:r.vertexAttrib4fv(t,e.value);break;case 3:r.vertexAttrib3fv(t,e.value);break;case 2:r.vertexAttrib2fv(t,e.value);break;case 1:r.vertexAttrib1fv(t,e.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else r.bindBuffer(p,e.buffer),r.enableVertexAttribArray(t),r.vertexAttribPointer(t,e.numComponents||e.size,e.type||5126,e.normalize||!1,e.stride||0,e.offset||0),void 0!==e.divisor&&r.vertexAttribDivisor(t,e.divisor)}}function W(r,t){return function(e){if(e.value){if(r.disableVertexAttribArray(t),4!==e.value.length)throw new Error("The length of an integer constant value must be 4!");r.vertexAttrib4iv(t,e.value)}else r.bindBuffer(p,e.buffer),r.enableVertexAttribArray(t),r.vertexAttribIPointer(t,e.numComponents||e.size,e.type||5124,e.stride||0,e.offset||0),void 0!==e.divisor&&r.vertexAttribDivisor(t,e.divisor)}}function X(r,t){return function(e){if(e.value){if(r.disableVertexAttribArray(t),4!==e.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");r.vertexAttrib4uiv(t,e.value)}else r.bindBuffer(p,e.buffer),r.enableVertexAttribArray(t),r.vertexAttribIPointer(t,e.numComponents||e.size,e.type||5125,e.stride||0,e.offset||0),void 0!==e.divisor&&r.vertexAttribDivisor(t,e.divisor)}}function V(f,c,e){var l=e.size,m=e.count;return function(e){f.bindBuffer(p,e.buffer);for(var r=e.size||e.numComponents||l,t=r/m,n=e.type||5126,o=S[n].size*r,i=e.normalize||!1,a=e.offset||0,u=o/m,s=0;s<m;++s)f.enableVertexAttribArray(c+s),f.vertexAttribPointer(c+s,t,n,i,o,a+u*s),void 0!==e.divisor&&f.vertexAttribDivisor(c+s,e.divisor)}}S[5126]={Type:Float32Array,size:4,setter:function(r,t){return function(e){r.uniform1f(t,e)}},arraySetter:function(r,t){return function(e){r.uniform1fv(t,e)}}},S[35664]={Type:Float32Array,size:8,setter:function(r,t){return function(e){r.uniform2fv(t,e)}}},S[35665]={Type:Float32Array,size:12,setter:function(r,t){return function(e){r.uniform3fv(t,e)}}},S[35666]={Type:Float32Array,size:16,setter:function(r,t){return function(e){r.uniform4fv(t,e)}}},S[5124]={Type:Int32Array,size:4,setter:D,arraySetter:j},S[35667]={Type:Int32Array,size:8,setter:C},S[35668]={Type:Int32Array,size:12,setter:k},S[35669]={Type:Int32Array,size:16,setter:L},S[5125]={Type:Uint32Array,size:4,setter:function(r,t){return function(e){r.uniform1ui(t,e)}},arraySetter:function(r,t){return function(e){r.uniform1uiv(t,e)}}},S[36294]={Type:Uint32Array,size:8,setter:function(r,t){return function(e){r.uniform2uiv(t,e)}}},S[36295]={Type:Uint32Array,size:12,setter:function(r,t){return function(e){r.uniform3uiv(t,e)}}},S[36296]={Type:Uint32Array,size:16,setter:function(r,t){return function(e){r.uniform4uiv(t,e)}}},S[35670]={Type:Uint32Array,size:4,setter:D,arraySetter:j},S[35671]={Type:Uint32Array,size:8,setter:C},S[35672]={Type:Uint32Array,size:12,setter:k},S[35673]={Type:Uint32Array,size:16,setter:L},S[35674]={Type:Float32Array,size:16,setter:function(r,t){return function(e){r.uniformMatrix2fv(t,!1,e)}}},S[35675]={Type:Float32Array,size:36,setter:function(r,t){return function(e){r.uniformMatrix3fv(t,!1,e)}}},S[35676]={Type:Float32Array,size:64,setter:function(r,t){return function(e){r.uniformMatrix4fv(t,!1,e)}}},S[35685]={Type:Float32Array,size:24,setter:function(r,t){return function(e){r.uniformMatrix2x3fv(t,!1,e)}}},S[35686]={Type:Float32Array,size:32,setter:function(r,t){return function(e){r.uniformMatrix2x4fv(t,!1,e)}}},S[35687]={Type:Float32Array,size:24,setter:function(r,t){return function(e){r.uniformMatrix3x2fv(t,!1,e)}}},S[35688]={Type:Float32Array,size:48,setter:function(r,t){return function(e){r.uniformMatrix3x4fv(t,!1,e)}}},S[35689]={Type:Float32Array,size:32,setter:function(r,t){return function(e){r.uniformMatrix4x2fv(t,!1,e)}}},S[35690]={Type:Float32Array,size:48,setter:function(r,t){return function(e){r.uniformMatrix4x3fv(t,!1,e)}}},S[35678]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:3553},S[35680]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:O},S[35679]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:32879},S[35682]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:3553},S[36289]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:U},S[36292]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:U},S[36293]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:O},S[36298]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:3553},S[36299]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:32879},S[36300]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:O},S[36303]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:U},S[36306]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:3553},S[36307]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:32879},S[36308]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:O},S[36311]={Type:null,size:0,setter:G,arraySetter:N,bindPoint:U};var Y={};Y[5126]={size:4,setter:z},Y[35664]={size:8,setter:z},Y[35665]={size:12,setter:z},Y[35666]={size:16,setter:z},Y[5124]={size:4,setter:W},Y[35667]={size:8,setter:W},Y[35668]={size:12,setter:W},Y[35669]={size:16,setter:W},Y[5125]={size:4,setter:X},Y[36294]={size:8,setter:X},Y[36295]={size:12,setter:X},Y[36296]={size:16,setter:X},Y[35670]={size:4,setter:W},Y[35671]={size:8,setter:W},Y[35672]={size:12,setter:W},Y[35673]={size:16,setter:W},Y[35674]={size:4,setter:V,count:2},Y[35675]={size:9,setter:V,count:3},Y[35676]={size:16,setter:V,count:4};var H=/^[ \t]*\n/;function q(e,r,t,n){var o,i=n||f,a=e.createShader(t),u=0;if(H.test(r)&&(u=1,r=r.replace(H,"")),e.shaderSource(a,r),e.compileShader(a),e.getShaderParameter(a,h))return a;var s=e.getShaderInfoLog(a);return i((o=(o=u)||0,++o,r.split("\n").map(function(e,r){return r+o+": "+e}).join("\n")+"\n*** Error compiling shader: "+s)),e.deleteShader(a),null}function K(e,t,r){var n,o;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var i=e;r=i.errorCallback,e=i.attribLocations,n=i.transformFeedbackVaryings,o=i.transformFeedbackMode}var a,u={errorCallback:r||f,transformFeedbackVaryings:n,transformFeedbackMode:o};return e&&(a={},Array.isArray(e)?e.forEach(function(e,r){a[e]=t?t[r]:r}):a=e,u.attribLocations=a),u}var Q=["VERTEX_SHADER","FRAGMENT_SHADER"];function Z(e,r){return 0<=r.indexOf("frag")?g:0<=r.indexOf("vert")?x:void 0}function $(r,e){e.forEach(function(e){r.deleteShader(e)})}function J(r,e,t,n,o){for(var i=K(t,n,o),a=[],u=[],s=0;s<e.length;++s){var f,c,l,m=e[s];"string"==typeof m&&(c=(f=_(m))?f.text:m,l=r[Q[s]],f&&f.type&&(l=Z(0,f.type)||l),m=q(r,c,l,i.errorCallback),u.push(m)),b.isShader(r,m)&&a.push(m)}if(a.length!==e.length)return i.errorCallback("not enough shaders for program"),$(r,u),null;var p=r.createProgram();a.forEach(function(e){r.attachShader(p,e)}),i.attribLocations&&Object.keys(i.attribLocations).forEach(function(e){r.bindAttribLocation(p,i.attribLocations[e],e)});var d=i.transformFeedbackVaryings;if(d&&(d.attribs&&(d=d.attribs),Array.isArray(d)||(d=Object.keys(d)),r.transformFeedbackVaryings(p,d,i.transformFeedbackMode||E)),r.linkProgram(p),r.getProgramParameter(p,v))return p;var y=r.getProgramInfoLog(p);return i.errorCallback("Error in program linking:"+y),r.deleteProgram(p),$(r,u),null}function ee(e,r,t,n,o){for(var i=K(t,n,o),a=[],u=0;u<r.length;++u){var s=q(e,r[u],e[Q[u]],i.errorCallback);if(!s)return null;a.push(s)}return J(e,a,i)}function re(e){var r=e.name;return r.startsWith("gl_")||r.startsWith("webgl_")}function te(u,e){var s=0;for(var r={},t=u.getProgramParameter(e,A),n=0;n<t;++n){var o,i,a=u.getActiveUniform(e,n);re(a)||("[0]"===(o=a.name).substr(-3)&&(o=o.substr(0,o.length-3)),(i=u.getUniformLocation(e,a.name))&&(r[o]=function(e,r){var t,n,o=1<e.size&&"[0]"===e.name.substr(-3),i=e.type,a=S[i];if(!a)throw new Error("unknown type: 0x".concat(i.toString(16)));return(t=a.bindPoint?(n=s,s+=e.size,o?a.arraySetter(u,i,n,r,e.size):a.setter(u,i,n,r,e.size)):a.arraySetter&&o?a.arraySetter(u,r):a.setter(u,r)).location=r,t}(a,i)))}return r}function ne(e,r){for(var t={},n=e.getProgramParameter(r,T),o=0;o<n;++o){var i=e.getTransformFeedbackVarying(r,o);t[i.name]={index:o,type:i.type,size:i.size}}return t}function oe(e,r,t){for(var n in r.transformFeedbackInfo&&(r=r.transformFeedbackInfo),t.attribs&&(t=t.attribs),t){var o,i=r[n];i&&((o=t[n]).offset?e.bindBufferRange(l,i.index,o.buffer,o.offset,o.size):e.bindBufferBase(l,i.index,o.buffer))}}function ie(n,o){for(var e=n.getProgramParameter(o,A),i=[],a=[],r=0;r<e;++r){a.push(r),i.push({});var t=n.getActiveUniform(o,r);if(re(t))break;i[r].name=t.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(e){var r=e[0],t=e[1];n.getActiveUniforms(o,a,n[r]).forEach(function(e,r){i[r][t]=e})});for(var u={},s=n.getProgramParameter(o,R),f=0;f<s;++f){var c=n.getActiveUniformBlockName(o,f),l={index:n.getUniformBlockIndex(o,c),usedByVertexShader:n.getActiveUniformBlockParameter(o,f,w),usedByFragmentShader:n.getActiveUniformBlockParameter(o,f,P),size:n.getActiveUniformBlockParameter(o,f,B),uniformIndices:n.getActiveUniformBlockParameter(o,f,M)};l.used=l.usedByVertexShader||l.usedByFragmentShader,u[c]=l}return{blockSpecs:u,uniformData:i}}var ae=/\[\d+\]\.$/;function ue(e,r,t,n){var o=t.blockSpecs,a=t.uniformData,i=o[n];if(!i)return m("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(i.size),s=e.createBuffer(),f=i.index;e.bindBuffer(d,s),e.uniformBlockBinding(r,i.index,f);var c=n+".";ae.test(c)&&(c=c.replace(ae,"."));var l={};return i.uniformIndices.forEach(function(e){var r=a[e],t=S[r.type],n=t.Type,o=r.size*t.size,i=r.name;i.substr(0,c.length)===c&&(i=i.substr(c.length)),l[i]=new n(u,r.offset,o/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:s,uniforms:l}}function se(e,r,t){var n=(r.uniformBlockSpec||r).blockSpecs[t.name];if(n){var o=n.index;return e.bindBufferRange(d,o,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function fe(e,r){for(var t=e.uniformSetters||e,n=arguments.length,o=1;o<n;++o){var i=arguments[o];if(Array.isArray(i))for(var a=i.length,u=0;u<a;++u)fe(t,i[u]);else for(var s in i){var f=t[s];f&&f(i[s])}}}function ce(e,r){for(var t={},n=e.getProgramParameter(r,F),o=0;o<n;++o){var i,a,u,s=e.getActiveAttrib(r,o);re(s)||(i=e.getAttribLocation(r,s.name),(u=(a=Y[s.type]).setter(e,i,a)).location=i,t[s.name]=u)}return t}function le(e,r){for(var t in r){var n=e[t];n&&n(r[t])}}function me(e,r){var t={program:r,uniformSetters:te(e,r),attribSetters:ce(e,r)};return s.isWebGL2(e)&&(t.uniformBlockSpec=ie(e,r),t.transformFeedbackInfo=ne(e,r)),t}r.setUniformsAndBindTextures=fe},"./src/textures.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.__esModule=!0,r.setTextureDefaults_=function(e){l.copyExistingProperties(e,T),e.textureColor&&Or(e.textureColor)},r.createSampler=Gr,r.createSamplers=function(r,t){var n={};return Object.keys(t).forEach(function(e){n[e]=Gr(r,t[e])}),n},r.setSamplerParameters=Lr,r.createTexture=tt,r.setEmptyTexture=rt,r.setTextureFromArray=et,r.loadTextureFromUrl=Zr,r.setTextureFromElement=Vr,r.setTextureFilteringForSize=Nr,r.setTextureParameters=kr,r.setDefaultTextureColor=Or,r.createTextures=function(o,i,e){e=e||Yr;var a=0,u=[],s={},f={};function c(){0===a&&setTimeout(function(){e(u.length?u:void 0,s,f)},0)}return Object.keys(i).forEach(function(n){var e,r,t=i[n];("string"==typeof(r=t.src)||Array.isArray(r)&&"string"==typeof r[0])&&(e=function(e,r,t){f[n]=t,--a,e&&u.push(e),c()},++a),s[n]=tt(o,t,e)}),c(),s},r.resizeTexture=function(e,r,t,n,o,i){n=n||t.width,o=o||t.height,i=i||t.depth;var a=t.target||P;e.bindTexture(a,r);var u,s=t.level||0,f=t.internalFormat||t.format||w,c=Tr(f),l=t.format||c.format,m=t.src;u=m&&(x(m)||Array.isArray(m)&&"number"==typeof m[0])?t.type||Br(0,m,c.type):t.type||c.type;if(a===B)for(var p=0;p<6;++p)e.texImage2D(h+p,s,f,n,o,0,l,u,null);else a===M||a===O?e.texImage3D(a,s,f,n,o,i,0,l,u,null):e.texImage2D(a,s,f,n,o,0,l,u,null)},r.canGenerateMipmap=wr,r.canFilter=Pr,r.getNumComponentsForFormat=function(e){var r=xr[e];if(r)return r.numColorComponents;throw"unknown format: "+e},r.getBytesPerElementForInternalFormat=Fr,r.getFormatAndTypeForInternalFormat=Tr;var v=n(t("./src/utils.js")),g=n(t("./src/typedarrays.js")),l=n(t("./src/helper.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((t=o?Object.getOwnPropertyDescriptor(e,i):null)&&(t.get||t.set)?Object.defineProperty(n,i,t):n[i]=e[i])}return n.default=e,r&&r.set(e,n),n}var o,T={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},x=g.isArrayBuffer;function R(){return o=o||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null)}var i,s=6406,f=6407,w=6408,c=6409,m=6410,p=6402,d=34041,y=33071,b=9728,_=9729,P=3553,B=34067,M=32879,O=35866,h=34069,E=34070,A=34071,F=34072,U=34073,S=34074,I=10241,D=10240,j=10242,C=10243,k=32882,L=33082,G=33083,N=33084,z=33085,W=3317,X=3314,V=32878,Y=3316,H=3315,q=32877,K=37443,Q=37441,Z=37440,$=33321,J=36756,ee=33325,re=33326,te=33330,ne=33329,oe=33338,ie=33337,ae=33340,ue=33339,se=33323,fe=36757,ce=33327,le=33328,me=33336,pe=33335,de=33332,ye=33331,be=33334,_e=33333,he=32849,ve=35905,ge=36194,xe=36758,Ee=35898,Ae=35901,Fe=34843,Te=34837,Re=36221,we=36239,Pe=36215,Be=36233,Me=36209,Oe=36227,Ue=32856,Se=35907,Ie=36759,De=32855,je=32854,Ce=32857,ke=34842,Le=34836,Ge=36220,Ne=36238,ze=36975,We=36214,Xe=36232,Ve=36226,Ye=36208,He=33189,qe=33190,Ke=36012,Qe=36013,Ze=35056,$e=5120,Je=5121,er=5122,rr=5123,tr=5124,nr=5125,or=5126,ir=32819,ar=32820,ur=33635,sr=5131,fr=36193,cr=33640,lr=35899,mr=35902,pr=36269,dr=34042,yr=33319,br=33320,_r=6403,hr=36244,vr=36248,gr=36249,xr={},Er=xr;function Ar(e){var r;return i||((r={})[s]={textureFormat:s,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Je,sr,fr,or]},r[c]={textureFormat:c,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Je,sr,fr,or]},r[m]={textureFormat:m,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Je,sr,fr,or]},r[f]={textureFormat:f,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Je,sr,fr,or,ur]},r[w]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Je,sr,fr,or,ir,ar]},r[$]={textureFormat:_r,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Je]},r[J]={textureFormat:_r,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[$e]},r[ee]={textureFormat:_r,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[or,sr]},r[re]={textureFormat:_r,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[or]},r[te]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Je]},r[ne]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[$e]},r[de]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[rr]},r[ye]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[er]},r[be]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[nr]},r[_e]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[tr]},r[se]={textureFormat:yr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Je]},r[fe]={textureFormat:yr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[$e]},r[ce]={textureFormat:yr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[or,sr]},r[le]={textureFormat:yr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[or]},r[me]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Je]},r[pe]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[$e]},r[oe]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rr]},r[ie]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[er]},r[ae]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[nr]},r[ue]={textureFormat:br,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[tr]},r[he]={textureFormat:f,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Je]},r[ve]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Je]},r[ge]={textureFormat:f,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Je,ur]},r[xe]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[$e]},r[Ee]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[or,sr,lr]},r[Ae]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[or,sr,mr]},r[Fe]={textureFormat:f,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[or,sr]},r[Te]={textureFormat:f,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[or]},r[Re]={textureFormat:vr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Je]},r[we]={textureFormat:vr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[$e]},r[Pe]={textureFormat:vr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[rr]},r[Be]={textureFormat:vr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[er]},r[Me]={textureFormat:vr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[nr]},r[Oe]={textureFormat:vr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[tr]},r[Ue]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Je]},r[Se]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Je]},r[Ie]={textureFormat:w,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[$e]},r[De]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Je,ar,cr]},r[je]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Je,ir]},r[Ce]={textureFormat:w,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[cr]},r[ke]={textureFormat:w,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[or,sr]},r[Le]={textureFormat:w,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[or]},r[Ge]={textureFormat:gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Je]},r[Ne]={textureFormat:gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[$e]},r[ze]={textureFormat:gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[cr]},r[We]={textureFormat:gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[rr]},r[Xe]={textureFormat:gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[er]},r[Ve]={textureFormat:gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[tr]},r[Ye]={textureFormat:gr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[nr]},r[He]={textureFormat:p,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[rr,nr]},r[qe]={textureFormat:p,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[nr]},r[Ke]={textureFormat:p,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[or]},r[Ze]={textureFormat:d,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dr]},r[Qe]={textureFormat:d,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[pr]},Object.keys(r).forEach(function(e){var n=r[e];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(e,r){var t=n.type[r];n.bytesPerElementMap[t]=e})}),i=r),i[e]}function Fr(e,r){var t=Ar(e);if(!t)throw"unknown internal format";var n=t.bytesPerElementMap[r];if(void 0===n)throw"unknown internal format";return n}function Tr(e){var r=Ar(e);if(!r)throw"unknown internal format";return{format:r.textureFormat,type:r.type[0]}}function Rr(e){return 0==(e&e-1)}function wr(e,r,t,n){if(!v.isWebGL2(e))return Rr(r)&&Rr(t);var o=Ar(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function Pr(e){var r=Ar(e);if(!r)throw"unknown internal format";return r.textureFilterable}function Br(e,r,t){return x(r)?g.getGLTypeForTypedArray(r):t||Je}function Mr(e,r,t,n,o){if(o%1!=0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=o/n)%1)throw"can't guess dimensions"}else if((n=o/t)%1)throw"can't guess dimensions"}else{var i=Math.sqrt(o/(r===B?6:1));n=i%1==0?t=i:(t=o,1)}return{width:t,height:n}}function Or(e){T.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}Er[s]={numColorComponents:1},Er[c]={numColorComponents:1},Er[m]={numColorComponents:2},Er[f]={numColorComponents:3},Er[w]={numColorComponents:4},Er[_r]={numColorComponents:1},Er[hr]={numColorComponents:1},Er[yr]={numColorComponents:2},Er[br]={numColorComponents:2},Er[f]={numColorComponents:3},Er[vr]={numColorComponents:3},Er[w]={numColorComponents:4},Er[gr]={numColorComponents:4},Er[p]={numColorComponents:1},Er[d]={numColorComponents:2};var Ur={};function Sr(e,r){void 0!==r.colorspaceConversion&&(Ur.colorspaceConversion=e.getParameter(K),e.pixelStorei(K,r.colorspaceConversion)),void 0!==r.premultiplyAlpha&&(Ur.premultiplyAlpha=e.getParameter(Q),e.pixelStorei(Q,r.premultiplyAlpha)),void 0!==r.flipY&&(Ur.flipY=e.getParameter(Z),e.pixelStorei(Z,r.flipY))}function Ir(e,r){void 0!==r.colorspaceConversion&&e.pixelStorei(K,Ur.colorspaceConversion),void 0!==r.premultiplyAlpha&&e.pixelStorei(Q,Ur.premultiplyAlpha),void 0!==r.flipY&&e.pixelStorei(Z,Ur.flipY)}function Dr(e){Ur.unpackAlignment=e.getParameter(W),v.isWebGL2(e)&&(Ur.unpackRowLength=e.getParameter(X),Ur.unpackImageHeight=e.getParameter(V),Ur.unpackSkipPixels=e.getParameter(Y),Ur.unpackSkipRows=e.getParameter(H),Ur.unpackSkipImages=e.getParameter(q))}function jr(e){e.pixelStorei(W,Ur.unpackAlignment),v.isWebGL2(e)&&(e.pixelStorei(X,Ur.unpackRowLength),e.pixelStorei(V,Ur.unpackImageHeight),e.pixelStorei(Y,Ur.unpackSkipPixels),e.pixelStorei(H,Ur.unpackSkipRows),e.pixelStorei(q,Ur.unpackSkipImages))}function Cr(e,r,t,n){n.minMag&&(t.call(e,r,I,n.minMag),t.call(e,r,D,n.minMag)),n.min&&t.call(e,r,I,n.min),n.mag&&t.call(e,r,D,n.mag),n.wrap&&(t.call(e,r,j,n.wrap),t.call(e,r,C,n.wrap),r!==M&&!l.isSampler(e,r)||t.call(e,r,k,n.wrap)),n.wrapR&&t.call(e,r,k,n.wrapR),n.wrapS&&t.call(e,r,j,n.wrapS),n.wrapT&&t.call(e,r,C,n.wrapT),n.minLod&&t.call(e,r,L,n.minLod),n.maxLod&&t.call(e,r,G,n.maxLod),n.baseLevel&&t.call(e,r,N,n.baseLevel),n.maxLevel&&t.call(e,r,z,n.maxLevel)}function kr(e,r,t){var n=t.target||P;e.bindTexture(n,r),Cr(e,n,e.texParameteri,t)}function Lr(e,r,t){Cr(e,r,e.samplerParameteri,t)}function Gr(e,r){var t=e.createSampler();return Lr(e,t,r),t}function Nr(e,r,t,n,o,i){t=t||T.textureOptions,i=i||w;var a,u=t.target||P;n=n||t.width,o=o||t.height,e.bindTexture(u,r),wr(e,n,o,i)?e.generateMipmap(u):(a=Pr(i)?_:b,e.texParameteri(u,I,a),e.texParameteri(u,D,a),e.texParameteri(u,j,y),e.texParameteri(u,C,y))}function zr(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function Wr(e,r){return(r=r||{}).cubeFaceOrder||[h,E,A,F,U,S]}function Xr(e,r){var t=Wr(0,r).map(function(e,r){return{face:e,ndx:r}});return t.sort(function(e,r){return e.face-r.face}),t}function Vr(n,o,i,a){var u=(a=a||T.textureOptions).target||P,s=a.level||0,f=i.width,c=i.height,l=a.internalFormat||a.format||w,e=Tr(l),m=a.format||e.format,p=a.type||e.type;if(Sr(n,a),n.bindTexture(u,o),u===B){var d,y,r=i.width,t=i.height;if(r/6===t)d=t,y=[0,0,1,0,2,0,3,0,4,0,5,0];else if(t/6===r)d=r,y=[0,0,0,1,0,2,0,3,0,4,0,5];else if(r/3==t/2)d=r/3,y=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(r/2!=t/3)throw"can't figure out cube map from element: "+(i.src?i.src:i.nodeName);d=r/2,y=[0,0,1,0,0,1,1,1,0,2,1,2]}var b=R();b?(b.canvas.width=d,b.canvas.height=d,c=f=d,Xr(0,a).forEach(function(e){var r=y[2*e.ndx+0]*d,t=y[2*e.ndx+1]*d;b.drawImage(i,r,t,d,d,0,0,d,d),n.texImage2D(e.face,s,l,m,p,b.canvas)}),b.canvas.width=1,b.canvas.height=1):"undefined"!=typeof createImageBitmap&&(c=f=d,Xr(0,a).forEach(function(r){var e=y[2*r.ndx+0]*d,t=y[2*r.ndx+1]*d;n.texImage2D(r.face,s,l,d,d,0,m,p,null),createImageBitmap(i,e,t,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(e){Sr(n,a),n.bindTexture(u,o),n.texImage2D(r.face,s,l,m,p,e),Ir(n,a),zr(a)&&Nr(n,o,a,f,c,l)})}))}else if(u===M||u===O){var _=Math.min(i.width,i.height),h=Math.max(i.width,i.height),v=h/_;if(v%1!=0)throw"can not compute 3D dimensions of element";var g=i.width===h?1:0,x=i.height===h?1:0;Dr(n),n.pixelStorei(W,1),n.pixelStorei(X,i.width),n.pixelStorei(V,0),n.pixelStorei(q,0),n.texImage3D(u,s,l,_,_,_,0,m,p,null);for(var E=0;E<v;++E){var A=E*_*g,F=E*_*x;n.pixelStorei(Y,A),n.pixelStorei(H,F),n.texSubImage3D(u,s,0,0,E,_,_,1,m,p,i)}jr(n)}else n.texImage2D(u,s,l,m,p,i);Ir(n,a),zr(a)&&Nr(n,o,a,f,c,l),kr(n,o,a)}function Yr(){}function Hr(e,r){return void 0!==r||function(e){if("undefined"!=typeof document){var r=document.createElement("a");return r.href=e,r.hostname===location.hostname&&r.port===location.port&&r.protocol===location.protocol}var t=new URL(location.href).origin;return new URL(e,location.href).origin===t}(e)?r:"anonymous"}function qr(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function Kr(e,r,t){return qr(e)?(setTimeout(function(){t(null,e)}),e):function(r,e,t){var n,o,i,a,u;if(t=t||Yr,e=void 0!==e?e:T.crossOrigin,e=Hr(r,e),"undefined"==typeof Image)return"undefined"!=typeof ImageBitmap&&(a=function(){t(o,i)},u={},e&&(u.mode="cors"),fetch(r,u).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){i=e,setTimeout(a)}).catch(function(e){o=e,setTimeout(a)}),n=null),n;function s(){n.removeEventListener("error",f),n.removeEventListener("load",c),n=null}n=new Image,void 0!==e&&(n.crossOrigin=e);var f=function(){var e="couldn't load image: "+r;l.error(e),t(e,n),s()},c=function(){t(null,n),s()};return n.addEventListener("error",f),n.addEventListener("load",c),n.src=r,n}(e,r,t)}function Qr(e,r,t){var n=(t=t||T.textureOptions).target||P;if(e.bindTexture(n,r),!1!==t.color){var o,i=(o=(o=t.color)||T.textureColor,x(o)?o:new Uint8Array([255*o[0],255*o[1],255*o[2],255*o[3]]));if(n===B)for(var a=0;a<6;++a)e.texImage2D(h+a,0,w,1,1,0,w,Je,i);else n===M||n===O?e.texImage3D(n,0,w,1,1,1,0,w,Je,i):e.texImage2D(n,0,w,1,1,0,w,Je,i)}}function Zr(t,n,o,i){return i=i||Yr,o=o||T.textureOptions,Qr(t,n,o),Kr((o=Object.assign({},o)).src,o.crossOrigin,function(e,r){e?i(e,n,r):(Vr(t,n,r,o),i(null,n,r))})}function $r(n,o,i,a){a=a||Yr;var e=i.src;if(6!==e.length)throw"there must be 6 urls for a cubemap";var u=i.level||0,s=i.internalFormat||i.format||w,r=Tr(s),f=i.format||r.format,c=i.type||Je,l=i.target||P;if(l!==B)throw"target must be TEXTURE_CUBE_MAP";Qr(n,o,i),i=Object.assign({},i);var m,p=6,d=[],y=Wr(0,i);m=e.map(function(e,r){return Kr(e,i.crossOrigin,(t=y[r],function(e,r){--p,e?d.push(e):r.width!==r.height?d.push("cubemap face img is not a square: "+r.src):(Sr(n,i),n.bindTexture(l,o),5===p?Wr().forEach(function(e){n.texImage2D(e,u,s,f,c,r)}):n.texImage2D(t,u,s,f,c,r),Ir(n,i),zr(i)&&n.generateMipmap(l)),0===p&&a(d.length?d:void 0,o,m)}));var t})}function Jr(a,u,s,f){f=f||Yr;var e=s.src,c=s.internalFormat||s.format||w,r=Tr(c),l=s.format||r.format,m=s.type||Je,p=s.target||O;if(p!==M&&p!==O)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Qr(a,u,s),s=Object.assign({},s);var d,y=e.length,b=[],_=s.level||0,h=s.width,v=s.height,g=e.length,x=!0;d=e.map(function(e,r){return Kr(e,s.crossOrigin,(i=r,function(e,r){if(--y,e)b.push(e);else{if(Sr(a,s),a.bindTexture(p,u),x){x=!1,h=s.width||r.width,v=s.height||r.height,a.texImage3D(p,_,c,h,v,g,0,l,m,null);for(var t=0;t<g;++t)a.texSubImage3D(p,_,0,0,t,h,v,1,l,m,r)}else{var n,o=r;r.width===h&&r.height===v||(o=(n=R()).canvas,n.canvas.width=h,n.canvas.height=v,n.drawImage(r,0,0,h,v)),a.texSubImage3D(p,_,0,0,i,h,v,1,l,m,o),n&&o===n.canvas&&(n.canvas.width=0,n.canvas.height=0)}Ir(a,s),zr(s)&&a.generateMipmap(p)}0===y&&f(b.length?b:void 0,u,d)}));var i})}function et(n,e,o,r){var t=(r=r||T.textureOptions).target||P;n.bindTexture(t,e);var i,a=r.width,u=r.height,s=r.depth,f=r.level||0,c=r.internalFormat||r.format||w,l=Tr(c),m=r.format||l.format,p=r.type||Br(0,o,l.type);x(o)?o instanceof Uint8ClampedArray&&(o=new Uint8Array(o.buffer)):(i=g.getTypedArrayTypeForGLType(p),o=new i(o));var d,y,b=Fr(c,p),_=o.byteLength/b;if(_%1)throw"length wrong size for format: "+v.glEnumToString(n,m);if(t===M||t===O)if(a||u||s)!a||u&&s?!u||a&&s?(d=Mr(0,t,a,u,_/s),a=d.width,u=d.height):(d=Mr(0,t,a,s,_/u),a=d.width,s=d.height):(d=Mr(0,t,u,s,_/a),u=d.width,s=d.height);else{var h=Math.cbrt(_);if(h%1!=0)throw"can't guess cube size of array of numElements: "+_;s=u=a=h}else d=Mr(0,t,a,u,_),a=d.width,u=d.height;return Dr(n),n.pixelStorei(W,r.unpackAlignment||1),Sr(n,r),t===B?(y=_/6*(b/o.BYTES_PER_ELEMENT),Xr(0,r).forEach(function(e){var r=y*e.ndx,t=o.subarray(r,r+y);n.texImage2D(e.face,f,c,a,u,0,m,p,t)})):t===M||t===O?n.texImage3D(t,f,c,a,u,s,0,m,p,o):n.texImage2D(t,f,c,a,u,0,m,p,o),Ir(n,r),jr(n),{width:a,height:u,depth:s,type:p}}function rt(e,r,t){var n=t.target||P;e.bindTexture(n,r);var o=t.level||0,i=t.internalFormat||t.format||w,a=Tr(i),u=t.format||a.format,s=t.type||a.type;if(Sr(e,t),n===B)for(var f=0;f<6;++f)e.texImage2D(h+f,o,i,t.width,t.height,0,u,s,null);else n===M||n===O?e.texImage3D(n,o,i,t.width,t.height,t.depth,0,u,s,null):e.texImage2D(n,o,i,t.width,t.height,0,u,s,null);Ir(e,t)}function tt(e,r,t){t=t||Yr,r=r||T.textureOptions;var n=e.createTexture(),o=r.target||P,i=r.width||1,a=r.height||1,u=r.internalFormat||w;e.bindTexture(o,n),o===B&&(e.texParameteri(o,j,y),e.texParameteri(o,C,y));var s,f=r.src;return f?("function"==typeof f&&(f=f(e,r)),"string"==typeof f?Zr(e,n,r,t):x(f)||Array.isArray(f)&&("number"==typeof f[0]||Array.isArray(f[0])||x(f[0]))?(i=(s=et(e,n,f,r)).width,a=s.height):Array.isArray(f)&&("string"==typeof f[0]||qr(f[0]))?(o===B?$r:Jr)(e,n,r,t):(Vr(e,n,f,r),i=f.width,a=f.height)):rt(e,n,r),zr(r)&&Nr(e,n,r,i,a,u),kr(e,n,r),n}},"./src/twgl-full.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={m4:r.__esModule=!0,v3:!0,primitives:!0};r.primitives=r.v3=r.m4=void 0;var o=c(t("./src/m4.js"));r.m4=o;var i=c(t("./src/v3.js"));r.v3=i;var u=c(t("./src/primitives.js"));r.primitives=u;var s=t("./src/twgl.js");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f();if(r&&r.has(e))return r.get(e);var t,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((t=o?Object.getOwnPropertyDescriptor(e,i):null)&&(t.get||t.set)?Object.defineProperty(n,i,t):n[i]=e[i])}return n.default=e,r&&r.set(e,n),n}Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=s[e]))})},"./src/twgl.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={addExtensionsToContext:r.__esModule=!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};r.addExtensionsToContext=v,r.getContext=function(e,r){return function(e,r){for(var t=["webgl2","webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=e.getContext(t[o],r)){b.addExtensionsToContext&&v(n);break}return n}(e,r)},r.getWebGLContext=function(e,r){return function(e,r){for(var t=["webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=e.getContext(t[o],r)){b.addExtensionsToContext&&v(n);break}return n}(e,r)},r.resizeCanvasToDisplaySize=function(e,r){r=r||1,r=Math.max(0,r);var t=e.clientWidth*r|0,n=e.clientHeight*r|0;return(e.width!==t||e.height!==n)&&(e.width=t,e.height=n,!0)},r.setDefaults=function(e){l.copyExistingProperties(e,b),o.setAttributeDefaults_(e),i.setTextureDefaults_(e)},r.vertexArrays=r.typedarrays=r.programs=r.framebuffers=r.draw=r.utils=r.textures=r.attributes=void 0;var o=y(t("./src/attributes.js"));r.attributes=o,Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=o[e]))});var i=y(t("./src/textures.js"));r.textures=i,Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=i[e]))});var l=y(t("./src/helper.js")),m=y(t("./src/utils.js"));r.utils=m,Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=m[e]))});var u=y(t("./src/draw.js"));r.draw=u,Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=u[e]))});var s=y(t("./src/framebuffers.js"));r.framebuffers=s,Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=s[e]))});var f=y(t("./src/programs.js"));r.programs=f,Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=f[e]))});var c=y(t("./src/typedarrays.js"));r.typedarrays=c,Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=c[e]))});var p=y(t("./src/vertex-arrays.js"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=d();if(r&&r.has(e))return r.get(e);var t,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((t=o?Object.getOwnPropertyDescriptor(e,i):null)&&(t.get||t.set)?Object.defineProperty(n,i,t):n[i]=e[i])}return n.default=e,r&&r.set(e,n),n}r.vertexArrays=p,Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(r[e]=p[e]))});var b={addExtensionsToContext:!0};var _=/^(.*?)_/;var h=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function v(e){for(var r=0;r<h.length;++r)!function(e,r){m.glEnumToString(e,0);var t=e.getExtension(r);if(t){var n={},o=_.exec(r)[1],i="_"+o;for(var a in t){var u=t[a],s="function"==typeof u,f=s?o:i,c=a;a.endsWith(f)&&(c=a.substring(0,a.length-f.length)),void 0!==e[c]?s||e[c]===u||l.warn(c,e[c],u,a):s?e[c]=function(e){return function(){return e.apply(t,arguments)}}(u):(e[c]=u,n[c]=u)}n.constructor={name:t.constructor.name},m.glEnumToString(n,0)}}(e,h[r])}},"./src/typedarrays.js":function(e,r,t){"use strict";r.__esModule=!0,r.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return o;if(e instanceof Uint8ClampedArray)return o;if(e instanceof Int16Array)return i;if(e instanceof Uint16Array)return a;if(e instanceof Int32Array)return u;if(e instanceof Uint32Array)return s;if(e instanceof Float32Array)return f;throw new Error("unsupported typed array type")},r.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return n;if(e===Uint8Array)return o;if(e===Uint8ClampedArray)return o;if(e===Int16Array)return i;if(e===Uint16Array)return a;if(e===Int32Array)return u;if(e===Uint32Array)return s;if(e!==Float32Array)throw new Error("unsupported typed array type");return f},r.getTypedArrayTypeForGLType=function(e){var r=c[e];if(r)return r;throw new Error("unknown gl type")};r.isArrayBuffer=void 0;var n=5120,o=5121,i=5122,a=5123,u=5124,s=5125,f=5126,c={},l=c;l[n]=Int8Array,l[o]=Uint8Array,l[i]=Int16Array,l[a]=Uint16Array,l[u]=Int32Array,l[s]=Uint32Array,l[f]=Float32Array,l[32819]=Uint16Array,l[32820]=Uint16Array,l[33635]=Uint16Array,l[5131]=Uint16Array,l[33640]=Uint32Array,l[35899]=Uint32Array,l[35902]=Uint32Array,l[36269]=Uint32Array,l[34042]=Uint32Array;var m="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};r.isArrayBuffer=m},"./src/utils.js":function(e,r,t){"use strict";r.__esModule=!0,r.isWebGL1=function(e){return!e.texStorage2D},r.isWebGL2=function(e){return!!e.texStorage2D},r.glEnumToString=void 0;var o,i,n=(o={},i={},function(e,r){return function(e){var r,t=e.constructor.name;if(!o[t]){for(var n in e)"number"==typeof e[n]&&(r=i[e[n]],i[e[n]]=r?"".concat(r," | ").concat(n):n);o[t]=!0}}(e),i[r]||"0x"+r.toString(16)});r.glEnumToString=n},"./src/v3.js":function(e,r,t){"use strict";r.__esModule=!0,r.add=function(e,r,t){return(t=t||new i(3))[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},r.copy=function(e,r){return(r=r||new i(3))[0]=e[0],r[1]=e[1],r[2]=e[2],r},r.create=function(e,r,t){var n=new i(3);e&&(n[0]=e);r&&(n[1]=r);t&&(n[2]=t);return n},r.cross=function(e,r,t){t=t||new i(3);var n=e[2]*r[0]-e[0]*r[2],o=e[0]*r[1]-e[1]*r[0];return t[0]=e[1]*r[2]-e[2]*r[1],t[1]=n,t[2]=o,t},r.distance=function(e,r){var t=e[0]-r[0],n=e[1]-r[1],o=e[2]-r[2];return Math.sqrt(t*t+n*n+o*o)},r.distanceSq=function(e,r){var t=e[0]-r[0],n=e[1]-r[1],o=e[2]-r[2];return t*t+n*n+o*o},r.divide=function(e,r,t){return(t=t||new i(3))[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},r.divScalar=function(e,r,t){return(t=t||new i(3))[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r,t},r.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]},r.lerp=function(e,r,t,n){return(n=n||new i(3))[0]=e[0]+t*(r[0]-e[0]),n[1]=e[1]+t*(r[1]-e[1]),n[2]=e[2]+t*(r[2]-e[2]),n},r.lerpV=function(e,r,t,n){return(n=n||new i(3))[0]=e[0]+t[0]*(r[0]-e[0]),n[1]=e[1]+t[1]*(r[1]-e[1]),n[2]=e[2]+t[2]*(r[2]-e[2]),n},r.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},r.lengthSq=function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},r.max=function(e,r,t){return(t=t||new i(3))[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},r.min=function(e,r,t){return(t=t||new i(3))[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},r.mulScalar=function(e,r,t){return(t=t||new i(3))[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},r.multiply=function(e,r,t){return(t=t||new i(3))[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},r.negate=function(e,r){return(r=r||new i(3))[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r},r.normalize=function(e,r){r=r||new i(3);var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=Math.sqrt(t);1e-5<n?(r[0]=e[0]/n,r[1]=e[1]/n,r[2]=e[2]/n):(r[0]=0,r[1]=0,r[2]=0);return r},r.setDefaultType=function(e){var r=i;return i=e,r},r.subtract=function(e,r,t){return(t=t||new i(3))[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t};var i=Float32Array},"./src/vertex-arrays.js":function(e,r,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.__esModule=!0,r.createVertexArrayInfo=function(r,e,t){var n=r.createVertexArray();r.bindVertexArray(n),e.length||(e=[e]);return e.forEach(function(e){i.setBuffersAndAttributes(r,e,t)}),r.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:n}},r.createVAOAndSetAttributes=n,r.createVAOFromBufferInfo=function(e,r,t){return n(e,r.attribSetters||r,t.attribs,t.indices)};var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){var i;Object.prototype.hasOwnProperty.call(e,o)&&((i=n?Object.getOwnPropertyDescriptor(e,o):null)&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o])}t.default=e,r&&r.set(e,t);return t}(t("./src/programs.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}var s=34963;function n(e,r,t,n){var o=e.createVertexArray();return e.bindVertexArray(o),i.setAttributes(r,t),n&&e.bindBuffer(s,n),e.bindVertexArray(null),o}}},o.c=n,o.d=function(e,r,t){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(r,e){if(1&e&&(r=o(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var n in r)o.d(t,n,function(e){return r[e]}.bind(null,n));return t},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="",o(o.s="./src/twgl-full.js");function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}var t,n},e.exports=n()},function(e,r,t){"use strict";r.__esModule=!0,r.PhongObj=r.PhongObjInfo=void 0;function n(){}r.PhongObjInfo=n;function o(i,a,e){function r(e,r,t){var n=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,n);var o=i.getAttribLocation(a,e);return i.enableVertexAttribArray(o),i.vertexAttribPointer(o,r,t,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,null),n}this.program=a,this.vao=i.createVertexArray(),i.bindVertexArray(this.vao),this.pts=r("position",4,i.FLOAT),this.normals=r("normal",4,i.FLOAT),this.colors=r("color",4,i.FLOAT),this.idxes=i.createBuffer(),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.idxes),i.bindVertexArray(null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),null!=e&&(this.num_idxes=e.idxes.length,i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.idxes),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.idxes,i.STATIC_DRAW),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),i.bindBuffer(i.ARRAY_BUFFER,this.pts),i.bufferData(i.ARRAY_BUFFER,e.pts,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ARRAY_BUFFER,this.normals),i.bufferData(i.ARRAY_BUFFER,e.normals,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ARRAY_BUFFER,this.colors),i.bufferData(i.ARRAY_BUFFER,e.colors,i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null))}r.PhongObj=o},function(e,r,t){"use strict";r.__esModule=!0;function K(e){return e.split("c").map(function(e){return+e})}var Q=t(0),Z=t(1),n=t(3),o=t(4),i=t(5),a=t(8);document.addEventListener("DOMContentLoaded",function(){var P=function(){var r=document.querySelector("canvas").getContext("webgl2");if(r){["EXT_float_blend","OES_texture_float_linear"].forEach(function(e){null==r.getExtension(e)&&alert("Required WebGL2 extension "+e+" not available")});var e=r.getExtension("WEBGL_debug_renderer_info"),t="Unknown";return null!=e&&(t=r.getParameter(e.UNMASKED_RENDERER_WEBGL)),document.getElementById("gpu").getElementsByTagName("span")[0].innerText=t,r.enable(r.DEPTH_TEST),r}alert("WebGL2 not enabled for your browser!")}(),B=P.canvas,M=Q.createProgramInfo(P,["phong_vert","phong_frag"]),O=(new Z.PhongObj(P,M.program,n.Cube.vtxes()),new Z.PhongObj(P,M.program,o.Terrain1.make()),new Z.PhongObj(P,M.program,n.Cube.wireframe()),.03),U=O/32,S=new i.GeometryGenerator(P,32),I=new a.FovChecker(P,1,O),D=[],j={},C={},k=[],L=null,G=!1,N=!1,z=!1,W=!1;document.addEventListener("keydown",function(e){switch(e.key){case"ArrowUp":N=!(G=!0);break;case"ArrowDown":G=!(N=!0);break;case"ArrowLeft":W=!(z=!0);break;case"ArrowRight":z=!(W=!0)}}),document.addEventListener("keyup",function(e){switch(e.key){case"ArrowUp":G=!1;break;case"ArrowDown":N=!1;break;case"ArrowLeft":z=!1;break;case"ArrowRight":W=!1}}),document.getElementById("lock-mouse").addEventListener("click",function(e){var r=P.canvas;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock,r.requestPointerLock()});var X=[0,.03,0],V=0,Y=-.1;document.addEventListener("mousemove",function(e){var r;document.pointerLockElement!==P.canvas&&document.mozPointerLockElement!==P.canvas||(r=[e.movementX,e.movementY],V-=.005*r[0],Y-=.005*r[1],Y=Math.max(Y,-.7),Y=Math.min(Y,-0))});function H(e){return[.015+e[0]*O,.015+e[1]*O,.015+e[2]*O]}var q=function(e){var t=0;null!=L&&(t=1e3/(e-L),document.getElementById("fps").innerText=t.toFixed(1)),L=e;function r(e){var r=e*Math.PI/2-V;X[0]+=Math.cos(r)*t*11e-6,X[2]+=Math.sin(r)*t*11e-6}G&&r(3),N&&r(1),z&&r(2),W&&r(0);for(var n,o=50*Math.PI/180,i=B.clientWidth/B.clientHeight,a=Q.m4.perspective(o,i,.01,20),u=Q.m4.translation(X),s=Q.m4.rotationX(Y),f=Q.m4.rotationY(V),c=Q.m4.multiply(Q.m4.multiply(u,f),s),l=Q.m4.transformPoint(c,Q.v3.create(0,0,0)),m=Q.m4.inverse(c),p=Q.m4.identity(),d=Q.m4.identity(),y=I.run(X,o,i,V,Y),b=0,_=0,h=Object.keys(C).map(function(e){var r=H(K(e)),t=Q.v3.subtract(r,X);t[1]=0;var n=Q.v3.length(t);return{b_id:e,diff:t,idx:C[e],dist:n}}).filter(function(e){if(1<e.dist)return!0;var r=V;return 0<e.diff[0]*Math.sin(r)+e.diff[2]*Math.cos(r)}).sort(function(e,r){return e.dist-r.dist});_<3&&b<y.length;)for(var v=y[b++],g=-1;g<2&&_<3;g++){var x=[v.coord[0],g,v.coord[1]],E=(n=x)[0]+"c"+n[1]+"c"+n[2];if(null==C[E]&&!j[E]){var A=void 0,F=void 0;if(k.length)F=k.pop(),A=D[F];else if(D.length<300)A=new Z.PhongObj(P,M.program,null),S.init_buffers(A),F=D.length,D.push(A);else{if(!h.length){_=3;break}var T=h.pop();delete C[T.b_id],F=T.idx,A=D[F]}var R=[U,U,U,0],w=[x[0]*O,x[1]*O,x[2]*O,1];S.run(A,w,R),0<A.num_idxes?C[E]=F:(j[E]=!0,k.push(F)),_++}}P.bindFramebuffer(P.FRAMEBUFFER,null),Q.resizeCanvasToDisplaySize(P.canvas),P.viewport(0,0,P.canvas.width,P.canvas.height),P.useProgram(M.program),Q.setUniforms(M,{cam_proj:a,cam_pos:[l[0],l[1],l[2],1],v_cam_pos:[l[0],l[1],l[2],1],cam_pos_inv:m,obj_pos:p,obj_pos_inv_tpose:d,light_pos:[0,10,0,1],flat_color:!1,fog_level:16}),Object.keys(C).forEach(function(e){var r=C[e],t=D[r],n=H(K(e)),o=[n[0]-X[0],n[2]-X[2]],i=V;.06<o[0]*Math.sin(i)+o[1]*Math.cos(i)||(P.bindVertexArray(t.vao),P.drawArrays(P.TRIANGLES,0,t.num_idxes))}),requestAnimationFrame(q)};requestAnimationFrame(q)})},function(e,r,t){"use strict";r.__esModule=!0,r.Cube=void 0;var d=t(0),s=t(1),n=(o.wireframe=function(){for(var e=[],r=0;r<8;r++)e.push(.4),e.push(.4),e.push(.4),e.push(1);var t=[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7],n=new s.PhongObjInfo;return n.pts=new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,1,-1,1,-1,1,-1,1,-1,-1,1,1,1,-1,1,1,1,1,1,1,-1,1,1,1]),n.idxes=new Uint16Array(t),n.colors=new Float32Array(e),n.normals=new Float32Array([]),n.num_idxes=t.length,n},o.vtxes=function(){for(var n=[[-1,-1],[-1,1],[1,-1],[1,1]],o=d.v3.create(0,0,-1),i=[d.m4.identity(),d.m4.rotationX(Math.PI),d.m4.rotationY(Math.PI/2),d.m4.rotationY(-Math.PI/2),d.m4.rotationX(Math.PI/2),d.m4.rotationX(-Math.PI/2)],a=[d.v3.create(0,0,-1),d.v3.create(0,0,1),d.v3.create(-1,0,0),d.v3.create(1,0,0),d.v3.create(0,1,0),d.v3.create(0,-1,0)],l=[],m=[],u=[],p=[],e=function(s){var e=d.m4.translation(a[s]),r=i[s],f=d.m4.multiply(e,r),c=d.m4.transformNormal(f,o);n.forEach(function(e){var r,t,n,o,i,a,u=d.m4.transformPoint(f,d.v3.create(e[0],e[1],0));r=u,l.push(r[0]),l.push(r[1]),l.push(r[2]),l.push(1),t=c,m.push(t[0]),m.push(t[1]),m.push(t[2]),m.push(0),n=s%2,o=(s+1)%2,i=s%3,a=1,p.push(n),p.push(o),p.push(i),p.push(a)});var t=4*s;u.push(t),u.push(1+t),u.push(2+t),u.push(2+t),u.push(1+t),u.push(3+t)},r=0;r<6;r++)e(r);var t=new s.PhongObjInfo;return t.pts=new Float32Array(l),t.normals=new Float32Array(m),t.idxes=new Uint16Array(u),t.colors=new Float32Array(p),t.num_idxes=u.length,t},o);function o(){}r.Cube=n},function(e,r,t){"use strict";r.__esModule=!0,r.Terrain1=void 0;var v=t(0),g=t(1),n=(o.make=function(){v.v3.create(0,0,-1);for(var e,r,t=function(e){var r=-Math.pow(+e,2)/(2*Math.pow(1,2));return 3*Math.pow(Math.E,r)},n=[],o=[],i=[],a=[],u=150,s=0;s<u;s++)for(var f=s/149-.25,c=0;c<150;c++){var l=c/149-.25,m=Math.sqrt(f*f+l*l),p=t(8*m),d=(t(8*m+.01)-p)/.01,y=void 0,y=d<1e-6&&-1e-6<d?v.v3.create(0,1,0):v.v3.normalize(v.v3.create(1,-1/d,0)),b=Math.atan2(l,f),_=v.m4.transformPoint(v.m4.rotationY(-b),y);r=[20*f,p,20*l],n.push(r[0]),n.push(r[1]),n.push(r[2]),n.push(1),e=_,o.push(e[0]),o.push(e[1]),o.push(e[2]),o.push(0),a.push(0),a.push(.8),a.push(.2),a.push(1),s<149&&c<149&&(i.push(c*u+s),i.push(c*u+s+1),i.push((c+1)*u+s),i.push(c*u+s+1),i.push((c+1)*u+s),i.push((c+1)*u+s+1))}var h=new g.PhongObjInfo;return h.pts=new Float32Array(n),h.normals=new Float32Array(o),h.idxes=new Uint16Array(i),h.colors=new Float32Array(a),h.num_idxes=i.length,h},o);function o(){}r.Terrain1=n},function(e,r,t){"use strict";r.__esModule=!0,r.GeometryGenerator=r.LookupTables=void 0;var m=t(0),n=t(6),o=t(7),i=function(e){var r=new o.TexFormat(e.R8UI,e.RED_INTEGER,e.UNSIGNED_BYTE);this.num_out=o.GlUtil.init_tex(e),o.GlUtil.tex_img_2d(e,this.num_out,r,16,16,new Uint8Array(n.LookupTablesData.num_out));var t=new o.TexFormat(e.RGBA16I,e.RGBA_INTEGER,e.SHORT);this.tris_out=o.GlUtil.init_tex(e),o.GlUtil.tex_img_2d(e,this.tris_out,t,5,256,new Int16Array(n.LookupTablesData.tris_out))};r.LookupTables=i;var a=(u.prototype.make_random_grid=function(){for(var e=this.gl,r=[],t=this.random_noise_dim,n=Math.pow(t,3),o=0;o<n;o++)r.push(2*Math.random()-1);this.random_noise=e.createTexture(),e.bindTexture(e.TEXTURE_3D,this.random_noise),e.texImage3D(e.TEXTURE_3D,0,e.R32F,t,t,t,0,e.RED,e.FLOAT,new Float32Array(r),0),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_R,e.REPEAT),e.bindTexture(e.TEXTURE_3D,null)},u.prototype.init_buffers=function(e){var r=this.voxel_grid_dim,t=r*r*r,n=this.gl,o=5*t*3*4*4,i=Math.ceil(.1*o);n.bindBuffer(n.ARRAY_BUFFER,e.pts),n.bufferData(n.ARRAY_BUFFER,i,n.DYNAMIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,e.normals),n.bufferData(n.ARRAY_BUFFER,i,n.DYNAMIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,e.colors),n.bufferData(n.ARRAY_BUFFER,i,n.DYNAMIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null)},u.prototype.run=function(e,r,t){this.gl,this.voxel_grid_dim,this.sample_origin=r,this.sample_scale=t,this.run_densities_sampler(),this.run_caseids_sampler();var n=this.run_caseids_prefix_scan();this.run_gen_geometry(e,n),this.run_gen_normals(e,n),e.num_idxes=3*n},u.prototype.setup_compute_vao=function(){var e=this.gl;this.compute_vao=e.createVertexArray(),e.bindVertexArray(this.compute_vao),this.compute_uvs=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.compute_uvs),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),this.compute_idxes=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.compute_idxes),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,2,1,3]),e.STATIC_DRAW),e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)},u.prototype.setup_densities_sampler=function(){var e=this.gl;this.gen_density_program=m.createProgramInfo(e,["pixel_compute_vert","eval_density_vals_frag"]);var r=new o.TexFormat(e.R32UI,e.RED_INTEGER,e.UNSIGNED_INT);this.densities=o.GlUtil.init_tex(e),o.GlUtil.tex_img_2d(e,this.densities,r,this.densities_dim_x(),this.densities_dim_y(),null),this.densities_fbo=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.densities_fbo),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.densities,0)},u.prototype.setup_caseids_sampler=function(){var e=this.gl;this.gen_caseids_program=m.createProgramInfo(e,["pixel_compute_vert","eval_caseids_frag"]);var r=new o.TexFormat(e.RGBA32UI,e.RGBA_INTEGER,e.UNSIGNED_INT);this.caseids0=o.GlUtil.init_tex(e),o.GlUtil.tex_img_2d(e,this.caseids0,r,this.caseids_dim_x(),this.caseids_dim_y(),null),this.caseids1=o.GlUtil.init_tex(e),o.GlUtil.tex_img_2d(e,this.caseids1,r,this.caseids_dim_x(),this.caseids_dim_y(),null),this.caseids_fbo=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.caseids_fbo),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.caseids0,0),this.caseids_prefix_scan_reduce_program=m.createProgramInfo(e,["caseids_prefix_scan_reduce_vert","caseids_prefix_scan_reduce_frag"]),this.caseids_prefix_scan_combine_program=m.createProgramInfo(e,["caseids_prefix_scan_combine_vert","caseids_prefix_scan_combine_frag"])},u.prototype.setup_gen_normals=function(){var e=this.gl;this.gen_normals_program=m.createProgramInfo(e,["gen_normals_vert","gen_normals_frag"]);var r=new o.TexFormat(e.RGBA32UI,e.RGBA_INTEGER,e.UNSIGNED_INT);this.gen_normals_tex=o.GlUtil.init_tex(e),o.GlUtil.tex_img_2d(e,this.gen_normals_tex,r,this.gen_geom_vtxes_dim_x(),this.gen_geom_vtxes_dim_y(),null),this.gen_colors_tex=o.GlUtil.init_tex(e),o.GlUtil.tex_img_2d(e,this.gen_colors_tex,r,this.gen_geom_vtxes_dim_x(),this.gen_geom_vtxes_dim_y(),null),this.gen_normals_fbo=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.gen_normals_fbo),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.gen_normals_tex,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT1,e.TEXTURE_2D,this.gen_colors_tex,0),e.bindFramebuffer(e.FRAMEBUFFER,null)},u.prototype.setup_gen_geometry=function(){var e=this.gl;this.gen_geometry_program=m.createProgramInfo(e,["gen_geometry2_vert","gen_geometry2_frag"]);var r=new o.TexFormat(e.RGBA32UI,e.RGBA_INTEGER,e.UNSIGNED_INT);this.gen_geometry_vtxes=o.GlUtil.init_tex(e),o.GlUtil.tex_img_2d(e,this.gen_geometry_vtxes,r,this.gen_geom_vtxes_dim_x(),this.gen_geom_vtxes_dim_y(),null),this.gen_geometry_fbo=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.gen_geometry_fbo),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.gen_geometry_vtxes,0),e.bindFramebuffer(e.FRAMEBUFFER,null)},u.prototype.run_densities_sampler=function(){var e=this.gl;e.useProgram(this.gen_density_program.program),e.bindVertexArray(this.compute_vao),m.setUniforms(this.gen_density_program,{sample_origin:this.sample_origin,sample_scale:this.sample_scale,density_grid_dim:this.voxel_grid_dim+1,z_density_mult:this.z_density_mult,noise_tex:this.random_noise}),e.bindFramebuffer(e.FRAMEBUFFER,this.densities_fbo),e.viewport(0,0,this.densities_dim_x(),this.densities_dim_y()),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.bindFramebuffer(e.FRAMEBUFFER,null)},u.prototype.run_caseids_sampler=function(){var e=this.gl;e.useProgram(this.gen_caseids_program.program),e.bindVertexArray(this.compute_vao),m.setUniforms(this.gen_caseids_program,{densities_texture:this.densities,num_tris_texture:this.lookup_tables.num_out,voxel_grid_dim:this.voxel_grid_dim}),e.bindFramebuffer(e.FRAMEBUFFER,this.caseids_fbo),e.viewport(0,0,this.caseids_dim_x(),this.caseids_dim_y()),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.bindFramebuffer(e.FRAMEBUFFER,null)},u.prototype.run_caseids_prefix_scan=function(){var i=this,a=this.gl,e=this.voxel_grid_dim,r=e*e*e;a.bindFramebuffer(a.FRAMEBUFFER,this.caseids_fbo);var u=Math.log2(r),s=this.caseids_prefix_scan_reduce_program;a.useProgram(s.program);for(var f=0,t=function(e){var r=f++%2==0,t=r?i.caseids0:i.caseids1,n=r?i.caseids1:i.caseids0;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,n,0),m.setUniforms(s,{img_in:t,dim:[i.caseids_dim_x(),i.caseids_dim_y()],stage:e,num_stages:u}),a.viewport(0,0,i.caseids_dim_x(),i.caseids_dim_y());var o=i.caseids_dim_x()*i.caseids_dim_y()/(1<<e);a.drawArrays(a.POINTS,0,o)},n=0;n<u;n++)t(n);for(s=this.caseids_prefix_scan_combine_program,a.useProgram(s.program),n=u-1;0<=n;n--)t(n);a.useProgram(null);var o=new ArrayBuffer(16),c=new Uint32Array(o);this.gl.readPixels(this.caseids_dim_x()-1,this.caseids_dim_y()-1,1,1,this.gl.RGBA_INTEGER,this.gl.UNSIGNED_INT,c),a.bindFramebuffer(a.FRAMEBUFFER,null);var l=c[2];return this.caseid_current=f%2,l},u.prototype.run_gen_geometry=function(e,r){var t=this.gl,n=this.voxel_grid_dim;t.useProgram(this.gen_geometry_program.program),m.setUniforms(this.gen_geometry_program,{out_dim:[this.gen_geom_vtxes_dim_x(),this.gen_geom_vtxes_dim_y()],case_ids:this.get_current_caseids_tex(),voxel_grid_dim:n,tris_out:this.lookup_tables.tris_out,densities:this.densities,sample_origin:this.sample_origin,sample_scale:this.sample_scale}),t.bindFramebuffer(t.FRAMEBUFFER,this.gen_geometry_fbo),t.viewport(0,0,this.gen_geom_vtxes_dim_x(),this.gen_geom_vtxes_dim_y());var o=n*n*n*3*5;t.drawArrays(t.POINTS,0,o),t.bindVertexArray(null),t.useProgram(null);var i=Math.ceil(3*r/this.gen_geom_vtxes_dim_x());t.bindBuffer(t.PIXEL_PACK_BUFFER,e.pts),t.readBuffer(t.COLOR_ATTACHMENT0),t.readPixels(0,0,this.gen_geom_vtxes_dim_x(),i,this.gl.RGBA_INTEGER,this.gl.UNSIGNED_INT,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null)},u.prototype.run_gen_normals=function(e,r){var t=this.gl;t.useProgram(this.gen_normals_program.program),m.setUniforms(this.gen_normals_program,{vtxes:this.gen_geometry_vtxes,dim:[this.gen_geom_vtxes_dim_x(),this.gen_geom_vtxes_dim_y()]}),t.bindFramebuffer(t.FRAMEBUFFER,this.gen_normals_fbo),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT1]),t.viewport(0,0,this.gen_geom_vtxes_dim_x(),this.gen_geom_vtxes_dim_y()),t.drawArrays(t.POINTS,0,3*r),t.drawBuffers([t.COLOR_ATTACHMENT0]);var n=Math.ceil(3*r/this.gen_geom_vtxes_dim_x());t.bindBuffer(t.PIXEL_PACK_BUFFER,e.normals),t.readPixels(0,0,this.gen_geom_vtxes_dim_x(),n,this.gl.RGBA_INTEGER,this.gl.UNSIGNED_INT,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,t.TEXTURE_2D,this.gen_normals_tex,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.gen_colors_tex,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,e.colors),t.readPixels(0,0,this.gen_geom_vtxes_dim_x(),n,this.gl.RGBA_INTEGER,this.gl.UNSIGNED_INT,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.gen_normals_tex,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,t.TEXTURE_2D,this.gen_colors_tex,0),t.bindFramebuffer(t.FRAMEBUFFER,null)},u.prototype.densities_dim_x=function(){var e=this.voxel_grid_dim+1;return e*e},u.prototype.densities_dim_y=function(){return this.voxel_grid_dim+1},u.prototype.densities_size=function(){return this.densities_dim_x()*this.densities_dim_y()},u.prototype.caseids_dim_x=function(){var e=this.voxel_grid_dim;return e*e},u.prototype.caseids_dim_y=function(){return this.voxel_grid_dim},u.prototype.caseids_size=function(){return this.caseids_dim_x()*this.caseids_dim_y()},u.prototype.gen_geom_vtxes_dim_x=function(){return this.voxel_grid_dim*this.voxel_grid_dim},u.prototype.gen_geom_vtxes_dim_y=function(){return 3*this.voxel_grid_dim*5},u.prototype.get_current_caseids_tex=function(){return 0==this.caseid_current?this.caseids0:this.caseids1},u.prototype.get_back_caseids_tex=function(){return 0==this.caseid_current?this.caseids1:this.caseids0},u.voxels_dim=32,u);function u(e,r){this.gl=e,this.voxel_grid_dim=r,this.random_noise_dim=16,this.caseid_current=0,this.z_density_mult=2.2,this.sample_origin=[0,0,0,1],this.sample_scale=[1,1,1,0],this.lookup_tables=new i(e),this.setup_densities_sampler(),this.setup_caseids_sampler(),this.setup_gen_geometry(),this.setup_compute_vao(),this.setup_gen_normals(),this.TexFormat_RGBA32UI={internal_format:e.RGBA32UI,format:e.RGBA_INTEGER,type:e.UNSIGNED_INT},this.make_random_grid()}r.GeometryGenerator=a},function(e,r,t){"use strict";r.__esModule=!0,r.LookupTablesData=void 0;var n=(o.num_out=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,2,3,4,4,3,3,4,4,3,4,5,5,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,2,3,3,4,3,4,2,3,3,4,4,5,4,5,3,2,3,4,4,3,4,5,3,2,4,5,5,4,5,2,4,1,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,2,4,3,4,3,5,2,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,3,4,4,3,4,5,5,4,4,3,5,2,5,4,2,1,2,3,3,4,3,4,4,5,3,4,4,5,2,3,3,2,3,4,4,5,4,5,5,2,4,3,5,4,3,2,4,1,3,4,4,5,4,5,3,4,4,5,5,2,3,4,2,1,2,3,3,2,3,4,2,1,3,2,4,1,2,1,1,0],o.tris_out=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,-1,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,-1,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,-1,2,10,8,-1,10,9,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,-1,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,-1,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,-1,1,9,11,-1,9,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,10,1,-1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,-1,0,8,10,-1,8,11,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,9,0,-1,3,11,9,-1,11,10,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,8,10,-1,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,-1,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,-1,4,7,1,-1,7,3,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,-1,3,0,4,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,-1,9,0,2,-1,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,10,9,-1,2,9,7,-1,2,7,3,-1,7,9,4,-1,-1,-1,-1,-1,8,4,7,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,-1,11,2,4,-1,2,0,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,-1,8,4,7,-1,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,11,-1,9,4,11,-1,9,11,2,-1,9,2,1,-1,-1,-1,-1,-1,3,10,1,-1,3,11,10,-1,7,8,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,10,-1,1,4,11,-1,1,0,4,-1,7,11,4,-1,-1,-1,-1,-1,4,7,8,-1,9,0,11,-1,9,11,10,-1,11,0,3,-1,-1,-1,-1,-1,4,7,11,-1,4,11,9,-1,9,11,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,-1,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,-1,8,3,5,-1,3,1,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,-1,1,2,10,-1,4,9,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,2,10,-1,5,4,2,-1,4,0,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,10,5,-1,3,2,5,-1,3,5,4,-1,3,4,8,-1,-1,-1,-1,-1,9,5,4,-1,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,-1,0,8,11,-1,4,9,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,-1,0,1,5,-1,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,1,5,-1,2,5,8,-1,2,8,11,-1,4,8,5,-1,-1,-1,-1,-1,10,3,11,-1,10,1,3,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,-1,0,8,1,-1,8,10,1,-1,8,11,10,-1,-1,-1,-1,-1,5,4,0,-1,5,0,11,-1,5,11,10,-1,11,0,3,-1,-1,-1,-1,-1,5,4,8,-1,5,8,10,-1,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,-1,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,-1,9,5,3,-1,5,7,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,7,8,-1,0,1,7,-1,1,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,5,3,-1,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,-1,9,5,7,-1,10,1,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,1,2,-1,9,5,0,-1,5,3,0,-1,5,7,3,-1,-1,-1,-1,-1,8,0,2,-1,8,2,5,-1,8,5,7,-1,10,5,2,-1,-1,-1,-1,-1,2,10,5,-1,2,5,3,-1,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,9,5,-1,7,8,9,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,7,-1,9,7,2,-1,9,2,0,-1,2,7,11,-1,-1,-1,-1,-1,2,3,11,-1,0,1,8,-1,1,7,8,-1,1,5,7,-1,-1,-1,-1,-1,11,2,1,-1,11,1,7,-1,7,1,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,8,-1,8,5,7,-1,10,1,3,-1,10,3,11,-1,-1,-1,-1,-1,5,7,0,-1,5,0,9,-1,7,11,0,-1,1,0,10,-1,11,10,0,-1,11,10,0,-1,11,0,3,-1,10,5,0,-1,8,0,7,-1,5,7,0,-1,11,10,5,-1,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,-1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,-1,1,9,8,-1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,-1,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,-1,1,2,6,-1,3,0,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,6,5,-1,9,0,6,-1,0,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,9,8,-1,5,8,2,-1,5,2,6,-1,3,2,8,-1,-1,-1,-1,-1,2,3,11,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,-1,11,2,0,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,2,3,11,-1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,10,6,-1,1,9,2,-1,9,11,2,-1,9,8,11,-1,-1,-1,-1,-1,6,3,11,-1,6,5,3,-1,5,1,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,11,-1,0,11,5,-1,0,5,1,-1,5,11,6,-1,-1,-1,-1,-1,3,11,6,-1,0,3,6,-1,0,6,5,-1,0,5,9,-1,-1,-1,-1,-1,6,5,9,-1,6,9,11,-1,11,9,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,10,6,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,-1,4,7,3,-1,6,5,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,-1,5,10,6,-1,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,1,9,7,-1,1,7,3,-1,7,9,4,-1,-1,-1,-1,-1,6,1,2,-1,6,5,1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,5,-1,5,2,6,-1,3,0,4,-1,3,4,7,-1,-1,-1,-1,-1,8,4,7,-1,9,0,5,-1,0,6,5,-1,0,2,6,-1,-1,-1,-1,-1,7,3,9,-1,7,9,4,-1,3,2,9,-1,5,9,6,-1,2,6,9,-1,3,11,2,-1,7,8,4,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,10,6,-1,4,7,2,-1,4,2,0,-1,2,7,11,-1,-1,-1,-1,-1,0,1,9,-1,4,7,8,-1,2,3,11,-1,5,10,6,-1,-1,-1,-1,-1,9,2,1,-1,9,11,2,-1,9,4,11,-1,7,11,4,-1,5,10,6,-1,8,4,7,-1,3,11,5,-1,3,5,1,-1,5,11,6,-1,-1,-1,-1,-1,5,1,11,-1,5,11,6,-1,1,0,11,-1,7,11,4,-1,0,4,11,-1,0,5,9,-1,0,6,5,-1,0,3,6,-1,11,6,3,-1,8,4,7,-1,6,5,9,-1,6,9,11,-1,4,7,9,-1,7,11,9,-1,-1,-1,-1,-1,10,4,9,-1,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,-1,4,9,10,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,0,1,-1,10,6,0,-1,6,4,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,1,-1,8,1,6,-1,8,6,4,-1,6,1,10,-1,-1,-1,-1,-1,1,4,9,-1,1,2,4,-1,2,6,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,-1,1,2,9,-1,2,4,9,-1,2,6,4,-1,-1,-1,-1,-1,0,2,4,-1,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,-1,8,2,4,-1,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,4,9,-1,10,6,4,-1,11,2,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,2,-1,2,8,11,-1,4,9,10,-1,4,10,6,-1,-1,-1,-1,-1,3,11,2,-1,0,1,6,-1,0,6,4,-1,6,1,10,-1,-1,-1,-1,-1,6,4,1,-1,6,1,10,-1,4,8,1,-1,2,1,11,-1,8,11,1,-1,9,6,4,-1,9,3,6,-1,9,1,3,-1,11,6,3,-1,-1,-1,-1,-1,8,11,1,-1,8,1,0,-1,11,6,1,-1,9,1,4,-1,6,4,1,-1,3,11,6,-1,3,6,0,-1,0,6,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,4,8,-1,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,-1,7,8,10,-1,8,9,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,7,3,-1,0,10,7,-1,0,9,10,-1,6,7,10,-1,-1,-1,-1,-1,10,6,7,-1,1,10,7,-1,1,7,8,-1,1,8,0,-1,-1,-1,-1,-1,10,6,7,-1,10,7,1,-1,1,7,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,6,-1,1,6,8,-1,1,8,9,-1,8,6,7,-1,-1,-1,-1,-1,2,6,9,-1,2,9,1,-1,6,7,9,-1,0,9,3,-1,7,3,9,-1,7,8,0,-1,7,0,6,-1,6,0,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,3,2,-1,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,-1,10,6,8,-1,10,8,9,-1,8,6,7,-1,-1,-1,-1,-1,2,0,7,-1,2,7,11,-1,0,9,7,-1,6,7,10,-1,9,10,7,-1,1,8,0,-1,1,7,8,-1,1,10,7,-1,6,7,10,-1,2,3,11,-1,11,2,1,-1,11,1,7,-1,10,6,1,-1,6,7,1,-1,-1,-1,-1,-1,8,9,6,-1,8,6,7,-1,9,1,6,-1,11,6,3,-1,1,3,6,-1,0,9,1,-1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,-1,7,0,6,-1,3,11,0,-1,11,6,0,-1,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,-1,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,-1,8,3,1,-1,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,1,2,-1,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,3,0,8,-1,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,9,0,-1,2,10,9,-1,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,11,7,-1,2,10,3,-1,10,8,3,-1,10,9,8,-1,-1,-1,-1,-1,7,2,3,-1,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,-1,7,6,0,-1,6,2,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,7,6,-1,2,3,7,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,2,-1,1,8,6,-1,1,9,8,-1,8,7,6,-1,-1,-1,-1,-1,10,7,6,-1,10,1,7,-1,1,3,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,7,6,-1,1,7,10,-1,1,8,7,-1,1,0,8,-1,-1,-1,-1,-1,0,3,7,-1,0,7,10,-1,0,10,9,-1,6,10,7,-1,-1,-1,-1,-1,7,6,10,-1,7,10,8,-1,8,10,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,8,4,-1,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,-1,3,0,6,-1,0,4,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,6,11,-1,8,4,6,-1,9,0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,4,6,-1,9,6,3,-1,9,3,1,-1,11,3,6,-1,-1,-1,-1,-1,6,8,4,-1,6,11,8,-1,2,10,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,3,0,11,-1,0,6,11,-1,0,4,6,-1,-1,-1,-1,-1,4,11,8,-1,4,6,11,-1,0,2,9,-1,2,10,9,-1,-1,-1,-1,-1,10,9,3,-1,10,3,2,-1,9,4,3,-1,11,3,6,-1,4,6,3,-1,8,2,3,-1,8,4,2,-1,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,4,2,-1,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,-1,2,3,4,-1,2,4,6,-1,4,3,8,-1,-1,-1,-1,-1,1,9,4,-1,1,4,2,-1,2,4,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,3,-1,8,6,1,-1,8,4,6,-1,6,10,1,-1,-1,-1,-1,-1,10,1,0,-1,10,0,6,-1,6,0,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,6,3,-1,4,3,8,-1,6,10,3,-1,0,3,9,-1,10,9,3,-1,10,9,4,-1,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,4,9,5,-1,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,0,1,-1,5,4,0,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,7,6,-1,8,3,4,-1,3,5,4,-1,3,1,5,-1,-1,-1,-1,-1,9,5,4,-1,10,1,2,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,11,7,-1,1,2,10,-1,0,8,3,-1,4,9,5,-1,-1,-1,-1,-1,7,6,11,-1,5,4,10,-1,4,2,10,-1,4,0,2,-1,-1,-1,-1,-1,3,4,8,-1,3,5,4,-1,3,2,5,-1,10,5,2,-1,11,7,6,-1,7,2,3,-1,7,6,2,-1,5,4,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,0,8,6,-1,0,6,2,-1,6,8,7,-1,-1,-1,-1,-1,3,6,2,-1,3,7,6,-1,1,5,0,-1,5,4,0,-1,-1,-1,-1,-1,6,2,8,-1,6,8,7,-1,2,1,8,-1,4,8,5,-1,1,5,8,-1,9,5,4,-1,10,1,6,-1,1,7,6,-1,1,3,7,-1,-1,-1,-1,-1,1,6,10,-1,1,7,6,-1,1,0,7,-1,8,7,0,-1,9,5,4,-1,4,0,10,-1,4,10,5,-1,0,3,10,-1,6,10,7,-1,3,7,10,-1,7,6,10,-1,7,10,8,-1,5,4,10,-1,4,8,10,-1,-1,-1,-1,-1,6,9,5,-1,6,11,9,-1,11,8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,-1,0,6,3,-1,0,5,6,-1,0,9,5,-1,-1,-1,-1,-1,0,11,8,-1,0,5,11,-1,0,1,5,-1,5,6,11,-1,-1,-1,-1,-1,6,11,3,-1,6,3,5,-1,5,3,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,9,5,11,-1,9,11,8,-1,11,5,6,-1,-1,-1,-1,-1,0,11,3,-1,0,6,11,-1,0,9,6,-1,5,6,9,-1,1,2,10,-1,11,8,5,-1,11,5,6,-1,8,0,5,-1,10,5,2,-1,0,2,5,-1,6,11,3,-1,6,3,5,-1,2,10,3,-1,10,5,3,-1,-1,-1,-1,-1,5,8,9,-1,5,2,8,-1,5,6,2,-1,3,8,2,-1,-1,-1,-1,-1,9,5,6,-1,9,6,0,-1,0,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,5,8,-1,1,8,0,-1,5,6,8,-1,3,8,2,-1,6,2,8,-1,1,5,6,-1,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,-1,1,6,10,-1,3,8,6,-1,5,6,9,-1,8,9,6,-1,10,1,0,-1,10,0,6,-1,9,5,0,-1,5,6,0,-1,-1,-1,-1,-1,0,3,8,-1,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,-1,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,-1,11,7,5,-1,8,3,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,11,7,-1,5,10,11,-1,1,9,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,7,5,-1,10,11,7,-1,9,8,1,-1,8,3,1,-1,-1,-1,-1,-1,11,1,2,-1,11,7,1,-1,7,5,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,1,2,7,-1,1,7,5,-1,7,2,11,-1,-1,-1,-1,-1,9,7,5,-1,9,2,7,-1,9,0,2,-1,2,11,7,-1,-1,-1,-1,-1,7,5,2,-1,7,2,11,-1,5,9,2,-1,3,2,8,-1,9,8,2,-1,2,5,10,-1,2,3,5,-1,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,2,0,-1,8,5,2,-1,8,7,5,-1,10,2,5,-1,-1,-1,-1,-1,9,0,1,-1,5,10,3,-1,5,3,7,-1,3,10,2,-1,-1,-1,-1,-1,9,8,2,-1,9,2,1,-1,8,7,2,-1,10,2,5,-1,7,5,2,-1,1,3,5,-1,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,-1,0,7,1,-1,1,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,3,-1,9,3,5,-1,5,3,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,8,7,-1,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,-1,5,10,8,-1,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,0,4,-1,5,11,0,-1,5,10,11,-1,11,3,0,-1,-1,-1,-1,-1,0,1,9,-1,8,4,10,-1,8,10,11,-1,10,4,5,-1,-1,-1,-1,-1,10,11,4,-1,10,4,5,-1,11,3,4,-1,9,4,1,-1,3,1,4,-1,2,5,1,-1,2,8,5,-1,2,11,8,-1,4,5,8,-1,-1,-1,-1,-1,0,4,11,-1,0,11,3,-1,4,5,11,-1,2,11,1,-1,5,1,11,-1,0,2,5,-1,0,5,9,-1,2,11,5,-1,4,5,8,-1,11,8,5,-1,9,4,5,-1,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,-1,3,5,2,-1,3,4,5,-1,3,8,4,-1,-1,-1,-1,-1,5,10,2,-1,5,2,4,-1,4,2,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,10,2,-1,3,5,10,-1,3,8,5,-1,4,5,8,-1,0,1,9,-1,5,10,2,-1,5,2,4,-1,1,9,2,-1,9,4,2,-1,-1,-1,-1,-1,8,4,5,-1,8,5,3,-1,3,5,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,4,5,-1,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,-1,8,5,3,-1,9,0,5,-1,0,3,5,-1,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,-1,4,9,11,-1,9,10,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,4,9,7,-1,9,11,7,-1,9,10,11,-1,-1,-1,-1,-1,1,10,11,-1,1,11,4,-1,1,4,0,-1,7,4,11,-1,-1,-1,-1,-1,3,1,4,-1,3,4,8,-1,1,10,4,-1,7,4,11,-1,10,11,4,-1,4,11,7,-1,9,11,4,-1,9,2,11,-1,9,1,2,-1,-1,-1,-1,-1,9,7,4,-1,9,11,7,-1,9,1,11,-1,2,11,1,-1,0,8,3,-1,11,7,4,-1,11,4,2,-1,2,4,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,7,4,-1,11,4,2,-1,8,3,4,-1,3,2,4,-1,-1,-1,-1,-1,2,9,10,-1,2,7,9,-1,2,3,7,-1,7,4,9,-1,-1,-1,-1,-1,9,10,7,-1,9,7,4,-1,10,2,7,-1,8,7,0,-1,2,0,7,-1,3,7,10,-1,3,10,2,-1,7,4,10,-1,1,10,0,-1,4,0,10,-1,1,10,2,-1,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,-1,4,1,7,-1,7,1,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,-1,4,1,7,-1,0,8,1,-1,8,7,1,-1,-1,-1,-1,-1,4,0,3,-1,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,-1,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,-1,3,9,11,-1,11,9,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,10,-1,0,10,8,-1,8,10,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,1,10,-1,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,-1,1,11,9,-1,9,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,-1,3,9,11,-1,1,2,9,-1,2,11,9,-1,-1,-1,-1,-1,0,2,11,-1,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,-1,2,8,10,-1,10,8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,2,-1,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,-1,2,8,10,-1,0,1,8,-1,1,10,8,-1,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,-1,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],o);function o(){}r.LookupTablesData=n},function(e,r,t){"use strict";r.__esModule=!0,r.GlUtil=r.TexFormat=void 0;function n(e,r,t){this.internal_format=e,this.format=r,this.type=t}r.TexFormat=n;var o=(i.init_tex=function(e){var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r},i.tex_img_2d=function(e,r,t,n,o,i){void 0===i&&(i=null),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,t.internal_format,n,o,0,t.format,t.type,i),e.bindTexture(e.TEXTURE_2D,null)},i);function i(){}r.GlUtil=o},function(e,r,t){"use strict";r.__esModule=!0,r.FovChecker=void 0;var v=t(0),n=(o.prototype.run=function(e,r,t,n,o){var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,this.fov_image_fbo),i.clearBufferuiv(i.COLOR,0,new Uint32Array([0,0,0,0]));var a=(this.img_dim-1)/2+.5,u=v.m4.ortho(-a,a,-a,a,-500,500),s=v.m4.multiply(v.m4.rotationZ(-n-Math.PI),v.m4.rotationX(-o)),f=this.vp_depth_voxels*Math.tan(r/2),c=f*t,l=v.m4.scaling([c,this.vp_depth_voxels,f]),m=[Math.floor(e[0]/this.voxel_block_size),Math.floor(e[2]/this.voxel_block_size)],p=v.m4.translation([e[0]/this.voxel_block_size-m[0],e[2]/this.voxel_block_size-m[1],0]),d=v.m4.multiply(p,v.m4.multiply(s,l));i.useProgram(this.top_ortho_cam.program),v.setUniforms(this.top_ortho_cam,{cam:u,vp:d}),i.bindVertexArray(this.vao),i.viewport(0,0,this.img_dim,this.img_dim),i.drawElements(i.TRIANGLES,12,i.UNSIGNED_SHORT,0),i.bindVertexArray(null),i.readPixels(0,0,this.img_dim,this.img_dim,i.RG_INTEGER,i.UNSIGNED_INT,this.fov_image_cpu),i.bindFramebuffer(i.FRAMEBUFFER,null);for(var y=[],b=0;b<this.img_dim;b++)for(var _=0;_<this.img_dim;_++){var h=2*(b*this.img_dim+_);0!=this.fov_image_cpu[h]&&y.push({coord:[_+m[0]-this.vp_depth_voxels,b+m[1]-this.vp_depth_voxels],dist:this.fov_image_cpu_floats[1+h]})}return y.sort(function(e,r){return e.dist-r.dist}),y},o);function o(e,r,t){this.gl=e,this.cam_vp_dist=r,this.voxel_block_size=t,this.top_ortho_cam=v.createProgramInfo(e,["fov_checker_vert","fov_checker_frag"]),this.vp_depth_voxels=Math.ceil(r/t),this.img_dim=2*this.vp_depth_voxels+1,this.fov_image=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.fov_image),e.texImage2D(e.TEXTURE_2D,0,e.RG32UI,this.img_dim,this.img_dim,0,e.RG_INTEGER,e.UNSIGNED_INT,null),e.bindTexture(e.TEXTURE_2D,null),this.fov_image_fbo=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.fov_image_fbo),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.fov_image,0),e.bindFramebuffer(e.FRAMEBUFFER,null);this.vao=e.createVertexArray(),e.bindVertexArray(this.vao),this.pts=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.pts);var n=e.getAttribLocation(this.top_ortho_cam.program,"pos");e.enableVertexAttribArray(n),e.vertexAttribPointer(n,4,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,-.1,0,1,1.1,1.1,1.1,1,-1.1,1.1,1.1,1,-1.1,1.1,-1.1,1,1.1,1.1,-1.1,1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.idxes=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.idxes),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3,0,3,4,0,4,1]),e.STATIC_DRAW),e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.fov_image_cpu_raw=new ArrayBuffer(this.img_dim*this.img_dim*2*4),this.fov_image_cpu=new Uint32Array(this.fov_image_cpu_raw),this.fov_image_cpu_floats=new Float32Array(this.fov_image_cpu_raw)}r.FovChecker=n}]);